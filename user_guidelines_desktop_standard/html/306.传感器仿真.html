<!DOCTYPE html>
<html class="writer-html5" lang="zh-CN" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>6. ä¼ æ„Ÿå™¨ä»¿çœŸ &mdash; Docs</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="_static/collapsible-lists/css/tree_view.css?v=a885cde7" />
      <link rel="stylesheet" type="text/css" href="_static/extra.css?v=be618c9b" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=34088549"></script>
        <script src="_static/doctools.js?v=888ff710"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
        <script src="_static/translations.js?v=beaddf03"></script>
        <script src="_static/collapsible-lists/js/CollapsibleLists.compressed.js?v=73120307"></script>
        <script src="_static/collapsible-lists/js/apply-collapsible-lists.js?v=660e4f45"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="ç´¢å¼•" href="genindex.html" />
    <link rel="search" title="æœç´¢" href="search.html" />
    <link rel="next" title="7. V2Xä»¿çœŸ" href="307.V2X%E4%BB%BF%E7%9C%9F.html" />
    <link rel="prev" title="5. åŠ¨åŠ›å­¦ä»¿çœŸ" href="305.%E5%8A%A8%E5%8A%9B%E5%AD%A6%E4%BB%BF%E7%9C%9F.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            TAD Sim
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="æœç´¢æ–‡æ¡£" aria-label="æœç´¢æ–‡æ¡£" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="å¯¼èˆªèœå•">
              <p class="caption" role="heading"><span class="caption-text">ğŸª„æ¦‚è¿°</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="101.%E5%85%B3%E4%BA%8E%20TAD%20Sim%20%E5%8D%95%E6%9C%BA%E7%89%88.html">1. å…³äº TAD Sim å•æœºç‰ˆ</a></li>
<li class="toctree-l1"><a class="reference internal" href="102.%E5%8A%9F%E8%83%BD%E4%BB%8B%E7%BB%8D.html">2. åŠŸèƒ½ä»‹ç»</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">ğŸš€å¿«é€Ÿå…¥é—¨</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="201.%E5%8D%95%E6%9C%BA%E7%89%88%E5%AE%89%E8%A3%85%E9%83%A8%E7%BD%B2.html">1. å•æœºç‰ˆå®‰è£…éƒ¨ç½²</a></li>
<li class="toctree-l1"><a class="reference internal" href="202.%E5%A6%82%E4%BD%95%E8%BF%9B%E8%A1%8C%E7%AE%97%E6%B3%95%E6%8E%A5%E5%85%A5.html">2. å¦‚ä½•è¿›è¡Œç®—æ³•æ¥å…¥</a></li>
<li class="toctree-l1"><a class="reference internal" href="203.%E5%AF%BC%E5%85%A5%E7%AC%AC%E4%B8%80%E4%B8%AA%E7%AE%97%E6%B3%95%E5%88%B0%E5%B9%B3%E5%8F%B0.html">3. å¯¼å…¥ç¬¬ä¸€ä¸ªç®—æ³•åˆ°å¹³å°</a></li>
<li class="toctree-l1"><a class="reference internal" href="204.%E5%88%9B%E5%BB%BA%E7%AC%AC%E4%B8%80%E4%B8%AA%E4%BB%BF%E7%9C%9F%E5%9C%BA%E6%99%AF.html">4. åˆ›å»ºç¬¬ä¸€ä¸ªä»¿çœŸåœºæ™¯</a></li>
<li class="toctree-l1"><a class="reference internal" href="205.%E6%92%AD%E6%94%BE%E7%AC%AC%E4%B8%80%E4%B8%AA%E5%9C%BA%E6%99%AF.html">5. æ’­æ”¾ç¬¬ä¸€ä¸ªåœºæ™¯</a></li>
<li class="toctree-l1"><a class="reference internal" href="206.%E5%88%9B%E5%BB%BA%E7%AC%AC%E4%B8%80%E4%B8%AA%E5%9C%B0%E5%9B%BE.html">6. åˆ›å»ºç¬¬ä¸€ä¸ªåœ°å›¾</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">ğŸ’¡ç”¨æˆ·æŒ‡å¼•</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="301.%E4%B8%93%E4%B8%9A%E6%9C%AF%E8%AF%AD.html">1. ä¸“ä¸šæœ¯è¯­</a></li>
<li class="toctree-l1"><a class="reference internal" href="302.%E5%9C%BA%E6%99%AF%E7%BC%96%E8%BE%91%E5%99%A8.html">2. åœºæ™¯ç¼–è¾‘å™¨</a></li>
<li class="toctree-l1"><a class="reference internal" href="303.%E5%9C%BA%E6%99%AF%E6%92%AD%E6%94%BE%E5%99%A8.html">3. åœºæ™¯æ’­æ”¾å™¨</a></li>
<li class="toctree-l1"><a class="reference internal" href="304.%E5%9C%B0%E5%9B%BE%E7%BC%96%E8%BE%91%E5%99%A8.html">4. åœ°å›¾ç¼–è¾‘å™¨</a></li>
<li class="toctree-l1"><a class="reference internal" href="305.%E5%8A%A8%E5%8A%9B%E5%AD%A6%E4%BB%BF%E7%9C%9F.html">5. åŠ¨åŠ›å­¦ä»¿çœŸ</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">6. ä¼ æ„Ÿå™¨ä»¿çœŸ</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#id2">6.1 æ‘„åƒå¤´ä»¿çœŸ</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id3">6.1.1 å‚æ•°è¯´æ˜</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id4">6.1.2 æ•°æ®è·å–</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id5">6.1.2.1 å…±äº«å†…å­˜</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id6">6.1.2.2 ç£ç›˜ä¿å­˜</a></li>
<li class="toctree-l4"><a class="reference internal" href="#pb">6.1.2.3 PB æ¶ˆæ¯</a></li>
<li class="toctree-l4"><a class="reference internal" href="#gpu">6.1.2.4 GPU æ˜¾å­˜å…±äº«</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id7">6.2 æ¿€å…‰é›·è¾¾ä»¿çœŸ</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id8">6.2.1 å‚æ•°è¯´æ˜</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id9">6.2.2 æ•°æ®è·å–</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#udp">6.2.2.1 UDP åŒ…</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id10">6.2.2.2 ç£ç›˜ä¿å­˜</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id11">6.2.2.3 PB æ¶ˆæ¯</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id12">6.2.2.4 å…¶ä»–è®¾ç½®</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id13">6.3 æ¯«ç±³æ³¢é›·è¾¾ä»¿çœŸ</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id14">6.3.1 å‚æ•°è¯´æ˜</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id15">6.3.2 æ•°æ®è·å–</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id16">6.3.2.1 PBæ¶ˆæ¯</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id17">6.3.2.2 ç£ç›˜ä¿å­˜</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id18">6.4 è¶…å£°æ³¢é›·è¾¾ä»¿çœŸ</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id19">6.4.1 å‚æ•°è¯´æ˜</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id20">6.4.2 æ•°æ®è·å–</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id21">6.4.2.1 ç£ç›˜ä¿å­˜</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id22">6.4.2.2 PB æ¶ˆæ¯</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id23">6.4.3 è½®è¯¢æ¨¡å¼</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id24">6.5 çœŸå€¼ä¼ æ„Ÿå™¨ä»¿çœŸ</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id25">6.5.1 å‚æ•°è¯´æ˜</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id26">6.5.2 æ•°æ®è·å–</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#imu">6.6 IMU ä»¿çœŸ</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id27">6.6.1 å‚æ•°è¯´æ˜</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id28">6.6.2 æ•°æ®è·å–</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id29">6.7 é±¼çœ¼ç›¸æœºä»¿çœŸ</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id30">6.7.1 å‚æ•°è¯´æ˜</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id31">6.7.2 æ•°æ®è·å–</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id32">6.7.2.1 å†…å­˜å…±äº«</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id33">6.7.2.2 ç£ç›˜ä¿å­˜</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id34">6.7.2.3 PB æ¶ˆæ¯</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id35">6.8 è¯­ä¹‰ç›¸æœºä»¿çœŸ</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id36">6.8.1 å‚æ•°è¯´æ˜</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id37">6.8.2 æ•°æ®è·å–</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id38">6.8.2.1 å†…å­˜å…±äº«</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id39">6.8.2.2 ç£ç›˜ä¿å­˜</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id40">6.8.2.3 PB æ¶ˆæ¯</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id41">6.9 æ·±åº¦ç›¸æœºä»¿çœŸ</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id42">6.9.1 å‚æ•°è¯´æ˜</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id43">6.9.2 æ•°æ®è·å–</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id44">6.9.2.1 å†…å­˜å…±äº«</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id45">6.9.2.1 ç£ç›˜ä¿å­˜</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id46">6.9.2.3 PB æ¶ˆæ¯</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#gps">6.10 GPS ä»¿çœŸ</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id47">6.10.1. å‚æ•°è¯´æ˜</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id48">6.10.2. æ•°æ®è·å–</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#v2x">6.11 V2X ä»¿çœŸ</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id49">6.12 ä»¿çœŸåˆæˆæ•°æ®ç”Ÿæˆ</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id50">6.13 ä¼ æ„Ÿå™¨ä¾èµ–æ¨¡å—</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#display">6.13.1 Display æ¨¡å—</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sensortruth">6.13.2 SensorTruth æ¨¡å—</a></li>
<li class="toctree-l3"><a class="reference internal" href="#radar">6.13.3 Radar æ¨¡å—</a></li>
<li class="toctree-l3"><a class="reference internal" href="#imu-gps">6.13.4 imu_gps æ¨¡å—</a></li>
<li class="toctree-l3"><a class="reference internal" href="#synthetic-data">6.13.5 synthetic_data æ¨¡å—</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="307.V2X%E4%BB%BF%E7%9C%9F.html">7. V2Xä»¿çœŸ</a></li>
<li class="toctree-l1"><a class="reference internal" href="308.%E4%BB%BF%E7%9C%9F%E5%90%88%E6%88%90%E6%95%B0%E6%8D%AE%E7%94%9F%E6%88%90.html">8. ä»¿çœŸåˆæˆæ•°æ®ç”Ÿæˆ</a></li>
<li class="toctree-l1"><a class="reference internal" href="309.%E5%9C%BA%E6%99%AF%E8%AF%84%E6%B5%8B.html">9. åœºæ™¯è¯„æµ‹</a></li>
<li class="toctree-l1"><a class="reference internal" href="310.%E4%BB%BF%E7%9C%9F%E6%95%B0%E6%8D%AE%E7%9A%84%E8%AE%B0%E5%BD%95%E5%92%8C%E5%9B%9E%E6%94%BE.html">10. ä»¿çœŸæ•°æ®çš„è®°å½•å’Œå›æ”¾</a></li>
<li class="toctree-l1"><a class="reference internal" href="311.%E5%8D%95%E6%9C%BA%E5%A4%9A%E8%BF%9B%E7%A8%8B%E5%B9%B6%E8%A1%8C%E4%BB%BF%E7%9C%9F.html">11. å•æœºå¤šè¿›ç¨‹å¹¶è¡Œä»¿çœŸ</a></li>
<li class="toctree-l1"><a class="reference internal" href="312.OpenSCENARIO%20%E6%94%AF%E6%8C%81.html">12. OpenSCENARIO æ”¯æŒ</a></li>
<li class="toctree-l1"><a class="reference internal" href="313.OpenDRIVE%20%E6%94%AF%E6%8C%81.html">13. OpenDRIVE æ”¯æŒ</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">ğŸ“šå¼€å‘è€…æŒ‡å¼•</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="401.%E7%B3%BB%E7%BB%9F%E7%BA%A6%E5%AE%9A.html">1. ç³»ç»Ÿçº¦å®š</a></li>
<li class="toctree-l1"><a class="reference internal" href="402.%E7%AE%97%E6%B3%95%E6%8E%A5%E5%85%A5%E8%AF%B4%E6%98%8E.html">2. ç®—æ³•æ¥å…¥è¯´æ˜ - txSimSDK</a></li>
<li class="toctree-l1"><a class="reference internal" href="403.%E4%BB%BF%E7%9C%9F%E6%B6%88%E6%81%AF%E8%AF%B4%E6%98%8E.html">3. ä»¿çœŸæ¶ˆæ¯è¯´æ˜</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">ğŸ”„ç‰ˆæœ¬è¯´æ˜</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="501.%E6%9C%80%E6%96%B0%E8%BF%AD%E4%BB%A3.html">1. æœ€æ–°è¿­ä»£</a></li>
<li class="toctree-l1"><a class="reference internal" href="502.%E5%8E%86%E5%8F%B2%E7%89%88%E6%9C%AC.html">2. å†å²ç‰ˆæœ¬</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="ç§»åŠ¨ç‰ˆå¯¼èˆªèœå•" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">TAD Sim</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="é¡µé¢å¯¼èˆª">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">6. ä¼ æ„Ÿå™¨ä»¿çœŸ</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="id1">
<h1>6. ä¼ æ„Ÿå™¨ä»¿çœŸ<a class="headerlink" href="#id1" title="Link to this heading">ïƒ</a></h1>
<p>TAD Sim å•æœºç‰ˆæ”¯æŒå¤šç§ç±»å‹ä¼ æ„Ÿå™¨ä»¿çœŸ, åŒ…æ‹¬æ‘„åƒå¤´ä»¿çœŸã€æ¿€å…‰é›·è¾¾ä»¿çœŸåŠæ¯«ç±³æ³¢é›·è¾¾ä»¿çœŸ. åœ¨æµ‹è¯•ä»»åŠ¡ä¸­, ä¸»è½¦å¯æ­è½½å¤šå°ä¼ æ„Ÿå™¨, ç”¨æˆ·å¯é€šè¿‡ TAD Sim å•æœºç‰ˆ, åœ¨åˆ›å»ºåœºæ™¯æ—¶å®Œæˆä¼ æ„Ÿå™¨é…ç½®. ä¼ æ„Ÿå™¨é…ç½®æ”¯æŒå¤šç»´åº¦å‚æ•°è‡ªå®šä¹‰, åŒ…æ‹¬ä½ç½®ã€é¢‘ç‡åŠåˆ†è¾¨ç‡ç­‰.</p>
<p>ç‚¹å‡»ä¸»è½¦æ¨¡å‹å³ä¾§çš„å›¾æ ‡, é¡µé¢ä¸­é—´å¼¹å‡ºè¯¦æƒ…çª—å£, æ˜¾ç¤ºä¸‰ç»´ä¸»è½¦æ¨¡å‹é¢„è§ˆ, æŒ‰ä½é¼ æ ‡å·¦é”®å¯è½¬åŠ¨æ¨¡å‹, é¼ æ ‡æ»šè½®å¯ç¼©æ”¾æ¨¡å‹.é…ç½®ä¸»è½¦æ¨¡å‹å…ƒç´ çš„ç›¸å…³å‚æ•°, åŒ…æ‹¬ä¼ æ„Ÿå™¨æ¨¡å‹ã€æ§åˆ¶å™¨æ¨¡å‹ã€åŠ¨åŠ›å­¦æ¨¡å‹ç­‰. ç‚¹å‡»ä¿å­˜, é…ç½®ä¸»è½¦æ¨¡å‹å®Œæˆ.</p>
<div align="center"><img src="./_static/images/image25.png" alt="" width="700px"></div><br>
<p>æ”¯æŒè®¾å¤‡ä»ä¸‹æ–¹çš„è®¾å¤‡åˆ—è¡¨ä¸­æ‹–æ‹½åˆ°ä¸»è½¦ä¸Š, è®¾å¤‡åˆ—è¡¨æ˜¾ç¤ºçš„ä¼ æ„Ÿå™¨åç§°å’Œä¸‹æ–¹çš„ä¼ æ„Ÿå™¨åˆ—è¡¨éœ€è¦ä¸€è‡´. é¼ æ ‡é€‰ä¸­åæ‹–æ‹½åˆ°è½¦ä¸Š, è‡ªåŠ¨å¸é™„åˆ°æ¾å¼€æ—¶çš„è½¦ä¸Šç›¸åº”è£…é…ä½ç½®, å¯é€šè¿‡å³ä¾§å‚æ•°è°ƒèŠ‚è°ƒæ•´ä½ç½®. åˆ—è¡¨ä¸­é€‰ä¸­ä¸€ä¸ªä¼ æ„Ÿå™¨, å·¦ä¾§è§†å›¾éœ€è¦é«˜äº®å®šä½, å³ä¾§åŸºæœ¬ä¿¡æ¯éœ€è¦æ˜¾ç¤ºè¯¥ä¼ æ„Ÿå™¨ä¿¡æ¯. åœ¨åˆ—è¡¨é€‰ä¸­åå¯å³é”®åˆ é™¤å’Œ delete é”®åˆ é™¤ä¼ æ„Ÿå™¨, æ”¯æŒæŒ‰ä½ shift å’Œ ctrl å¤šé€‰. å¤šé€‰å, å³ä¾§ä¿¡æ¯åˆ—è¡¨æ˜¾ç¤ºä¸ºç©º.</p>
<div align="center"><img src="./_static/images/image26.png" alt="" width="700px"></div><br>
<section id="id2">
<h2>6.1 æ‘„åƒå¤´ä»¿çœŸ<a class="headerlink" href="#id2" title="Link to this heading">ïƒ</a></h2>
<p>TAD Sim æ”¯æŒæ‘„åƒå¤´ä»¿çœŸ, åŸºäºçœŸå®æ‘„åƒå¤´æ¨¡å‹ä»¿çœŸ, å¹³å°æä¾›é»˜è®¤é…ç½®å‚æ•°, å¹¶æ”¯æŒå„å‚æ•°è‡ªå®šä¹‰é…ç½®åŠŸèƒ½, æ‘„åƒå¤´ä»¿çœŸä¾èµ– Display æ¨¡å—.</p>
<div align="center"><img src="./_static/images/image51.png" alt="" width="700px"></div><br>
<section id="id3">
<h3>6.1.1 å‚æ•°è¯´æ˜<a class="headerlink" href="#id3" title="Link to this heading">ïƒ</a></h3>
<table border="1" class="docutils">
<thead>
<tr>
<th>åç§°</th>
<th>é»˜è®¤å€¼</th>
<th>èŒƒå›´</th>
<th>å«ä¹‰</th>
</tr>
</thead>
<tbody>
<tr>
<td>ä½ç½®X(cm)</td>
<td>0</td>
<td>[-1000, 1000]</td>
<td>å®‰è£…ä½ç½®, åæ ‡åŸç‚¹ä½äºå››è½®ä¸­å¿ƒçš„åœ°é¢å‚ç‚¹</td>
</tr>
<tr>
<td>ä½ç½®Y(cm)</td>
<td>0</td>
<td>[-1000, 1000]</td>
<td>å®‰è£…ä½ç½®, åæ ‡åŸç‚¹ä½äºå››è½®ä¸­å¿ƒçš„åœ°é¢å‚ç‚¹</td>
</tr>
<tr>
<td>ä½ç½®Z(cm)</td>
<td>171</td>
<td>[0, 1000]</td>
<td>å®‰è£…ä½ç½®, åæ ‡åŸç‚¹ä½äºå››è½®ä¸­å¿ƒçš„åœ°é¢å‚ç‚¹</td>
</tr>
<tr>
<td>æ—‹è½¬X(Â°)</td>
<td>0</td>
<td>[-180, 180]</td>
<td>å®‰è£…è§’åº¦</td>
</tr>
<tr>
<td>æ—‹è½¬Y(Â°)</td>
<td>0</td>
<td>[-180, 180]</td>
<td>å®‰è£…è§’åº¦</td>
</tr>
<tr>
<td>æ—‹è½¬Z(Â°)</td>
<td>0</td>
<td>[-180, 180]</td>
<td>å®‰è£…è§’åº¦</td>
</tr>
<tr>
<td>å®ä¾‹ID</td>
<td>0</td>
<td>-</td>
<td>å½“é…ç½®äº†å¤šä¸ª display æ—¶, åªæœ‰Displayçš„å®ä¾‹IDä¸€è‡´æ—¶, æ‰ä¼šè¢«å¤„ç†</td>
</tr>
<tr>
<td>é¢‘ç‡(Hz)</td>
<td>25</td>
<td>[0, 1000]</td>
<td>æ‹ç…§é¢‘ç‡</td>
</tr>
<tr>
<td>è‰²å½©æ¨¡å¼</td>
<td>å½©è‰²</td>
<td>å½©è‰²/ç°åº¦</td>
<td>-</td>
</tr>
<tr>
<td>æ°´å¹³åˆ†è¾¨ç‡</td>
<td>1920</td>
<td>æ•´æ•°</td>
<td>å›¾åƒå°ºå¯¸, åƒç´ </td>
</tr>
<tr>
<td>å‚ç›´åˆ†è¾¨ç‡</td>
<td>1208</td>
<td>æ•´æ•°</td>
<td>å›¾åƒå°ºå¯¸, åƒç´ </td>
</tr>
<tr>
<td>ç»†è…»åº¦</td>
<td>0</td>
<td>[-5.0, 5.0]</td>
<td>æ­£æ•°ç»†è…», è´Ÿæ•°ç²—ç³™.ç»†è…»ä¼šå¢åŠ æ¸²æŸ“è´Ÿæ‹…</td>
</tr>
<tr>
<td>æ¨¡ç³Š</td>
<td>0</td>
<td>[0, 1]</td>
<td>-</td>
</tr>
<tr>
<td>è¿åŠ¨æ¨¡ç³Š</td>
<td>0</td>
<td>[0, 1]</td>
<td>-</td>
</tr>
<tr>
<td>å…‰æ™•å¼ºåº¦</td>
<td>0</td>
<td>[0, 1]</td>
<td>-</td>
</tr>
<tr>
<td>å™ªå£°å¼ºåº¦</td>
<td>0</td>
<td>[0.0, 1.0]</td>
<td>-</td>
</tr>
<tr>
<td>æš—è§’</td>
<td>0.4</td>
<td>[0.0, 1.0]</td>
<td></td>
</tr>
<tr>
<td>æ³›å…‰ bloom</td>
<td>0.675</td>
<td>[0.0, 1.0]</td>
<td></td>
</tr>
<tr>
<td>æ›å…‰æ¨¡å¼</td>
<td>0</td>
<td>è‡ªåŠ¨0 <br> æ‰‹åŠ¨1(æ‰‹åŠ¨æ—¶:å¿«é—¨é€Ÿåº¦, ISO, å­”å¾„å‚æ•°æœ‰æ•ˆ)</td>
<td></td>
</tr>
<tr>
<td>æ›å…‰è¡¥å¿</td>
<td>1</td>
<td>-15.0ï½15.0</td>
<td>æ›å…‰çš„å¯¹æ•° 2^n è°ƒæ•´, è´Ÿå€¼å˜æš—, æ­£å€¼åŠ äº®</td>
</tr>
<tr>
<td>å¿«é—¨é€Ÿåº¦</td>
<td>60</td>
<td>1.0\~200</td>
<td>åƒç´ äº®åº¦B=æ›å…‰ * åœºæ™¯è¡¨é¢äº®åº¦L <br> æ›å…‰=1/ (å­”å¾„^2/å¿«é—¨é€Ÿåº¦*100/ISO)</td>
</tr>
<tr>
<td>ISO</td>
<td>100</td>
<td>1.0\~æ— ç©·</td>
<td>1.0\~æ— ç©·</td>
</tr>
<tr>
<td>å­”å¾„(å…‰é˜‘ã€å…‰åœˆ)</td>
<td>4</td>
<td>1.0\~32.0</td>
<td>1.0\~32.0</td>
</tr>
<tr>
<td>è‰²æ¸©</td>
<td>6500</td>
<td>1500ï½15000K</td>
<td>è‰²æ¸©</td>
</tr>
<tr>
<td>ç™½è‰²è°ƒ</td>
<td>0</td>
<td>-1.0ï½1.0</td>
<td></td>
</tr>
<tr>
<td>é•œå¤´é€é•œç‡</td>
<td>98</td>
<td>1.0ï½100.0%</td>
<td></td>
</tr>
<tr>
<td>ç•¸å˜å‚æ•°</td>
<td>k1=-5.3336804278253547e-001, <br> k2=4.5773462092698042e-001, <br> k3=-4.8360765272003647e-001, <br> p1=-2.3929586859060227e-003, <br> p2=1.8364297357014352e-003</td>
<td>-</td>
<td>åˆ†å¸ƒè¡¨ç¤ºk1,k2,k3,p1,p2</td>
</tr>
<tr>
<td>å†…å‚å½¢å¼</td>
<td>0</td>
<td>0:çŸ©é˜µ, 1:FOV, 2:æ„Ÿå…‰å™¨</td>
<td>-</td>
</tr>
<tr>
<td>å†…å‚çŸ©é˜µ</td>
<td>1.9451674168728503e+003, <br> 0, <br> 9.4611889604089231e+002; <br> 0,1.9381372280069070e+003, <br> 6.1970485474739780e+002; <br> 0,0,1</td>
<td>é•¿åº¦ä¸º9çš„æ•°ç»„ <br> ç»™å‡ºé»˜è®¤å€¼çš„ä½ç½®readonly <br> å…¶ä½™ä½ç½®å€¼ä¾æ¬¡ä¸ºfx, skew, cx, fy, cy</td>
<td>å½“å†…å‚å½¢å¼ä¸ºçŸ©é˜µæ—¶</td>
</tr>
<tr>
<td>æ°´å¹³FOV(Â°)</td>
<td>60</td>
<td>[0, 180]</td>
<td>å½“å†…å‚å½¢å¼ä¸ºfovæ—¶</td>
</tr>
<tr>
<td>å‚ç›´FOV(Â°)</td>
<td>36.28</td>
<td>[0, 180]</td>
<td>å½“å†…å‚å½¢å¼ä¸ºfovæ—¶</td>
</tr>
<tr>
<td>æ„Ÿå…‰å™¨å®½åº¦(mm)</td>
<td>10</td>
<td>(0, 10000]</td>
<td>å½“å†…å‚å½¢å¼ä¸ºæ„Ÿå…‰å™¨æ—¶</td>
</tr>
<tr>
<td>æ„Ÿå…‰å™¨é«˜åº¦(mm)</td>
<td>10</td>
<td>(0, 10000]</td>
<td>å½“å†…å‚å½¢å¼ä¸ºæ„Ÿå…‰å™¨æ—¶</td>
</tr>
<tr>
<td>é•œå¤´ç„¦è·(mm)</td>
<td>10</td>
<td>(0, 10000]</td>
<td>å½“å†…å‚å½¢å¼ä¸ºæ„Ÿå…‰å™¨æ—¶</td>
</tr>
</tbody>
</table>
</section>
<section id="id4">
<h3>6.1.2 æ•°æ®è·å–<a class="headerlink" href="#id4" title="Link to this heading">ïƒ</a></h3>
<section id="id5">
<h4>6.1.2.1 å…±äº«å†…å­˜<a class="headerlink" href="#id5" title="Link to this heading">ïƒ</a></h4>
<p>æ‘„åƒå¤´ä»¿çœŸå…±äº«åœ°å€ä¸º <code class="docutils literal notranslate"><span class="pre">Tadsim_Camera_{cameraID}</span></code>, å…¶ä¸­ cameraID ä»å‰ç«¯ä¼ æ„Ÿå™¨é…ç½®ç•Œé¢ä¸Šè·å– (å¦‚ <code class="docutils literal notranslate"><span class="pre">Tadsim_Camera_1</span></code>).
å¼€å…³è®¾ç½®æ–¹æ³•ä¸º, é¦–å…ˆæ‰“å¼€ <code class="docutils literal notranslate"><span class="pre">Game.ini</span></code> æ–‡ä»¶, æ–‡ä»¶è·¯å¾„å¦‚ä¸‹:</p>
<ul class="simple">
<li><p>Windows ä¸‹:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">C:\Users\ç”¨æˆ·å\AppData\Roaming\tadsim\data\service_data\display\Saved\Config\WindowsNoEditor\Game.ini</span></code></p></li>
</ul>
</li>
<li><p>Ubuntu ä¸‹:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">/home/ç”¨æˆ·å/.config/tadsim/Display/Saved/Config/LinuxNoEditor/Game.ini</span></code></p></li>
</ul>
</li>
</ul>
<p>åœ¨ Game.ini ä¸­æ·»åŠ å¦‚ä¸‹å†…å®¹:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[Sensor]</span>
<span class="na">CameraMemShare</span><span class="o">=</span><span class="s">true</span>
</pre></div>
</div>
<p>æ•°æ®æ ¼å¼ä¸ºäºŒè¿›åˆ¶æµ, æ•°æ®å®šä½å¦‚ä¸‹:</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>å ä½é•¿åº¦</th>
<th>æ•°æ®ç±»å‹</th>
<th>å«ä¹‰</th>
</tr>
</thead>
<tbody>
<tr>
<td>4</td>
<td>int</td>
<td>å›ºå®šä¸º 123456</td>
</tr>
<tr>
<td>8</td>
<td>int64</td>
<td>æ—¶é—´æˆ³ (é€»è¾‘æ—¶é—´)</td>
</tr>
<tr>
<td>4</td>
<td>int</td>
<td>å›¾åƒå¤§å° = 4 * w * h</td>
</tr>
<tr>
<td>4 * w * h</td>
<td>BGRA</td>
<td>å›¾åƒæ•°æ®</td>
</tr>
</tbody>
</table>
<!-- å‚è€ƒ: https://myst-parser.readthedocs.io/en/latest/syntax/code_and_apis.html#including-code-from-files -->
<p>ä»£ç ç¤ºä¾‹:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;memory_io.h&quot;</span>

<span class="cp">#define BOOST_DISABLE_ABI_HEADERS</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;boost/interprocess/allocators/allocator.hpp&quot;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;boost/interprocess/containers/vector.hpp&quot;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;boost/interprocess/managed_shared_memory.hpp&quot;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;boost/interprocess/sync/interprocess_sharable_mutex.hpp&quot;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;boost/interprocess/sync/scoped_lock.hpp&quot;</span>

<span class="k">using</span><span class="w"> </span><span class="n">char_allocator</span><span class="w"> </span><span class="o">=</span>
<span class="w">    </span><span class="n">boost</span><span class="o">::</span><span class="n">interprocess</span><span class="o">::</span><span class="n">allocator</span><span class="o">&lt;</span><span class="kt">char</span><span class="p">,</span><span class="w"> </span><span class="n">boost</span><span class="o">::</span><span class="n">interprocess</span><span class="o">::</span><span class="n">managed_shared_memory</span><span class="o">::</span><span class="n">segment_manager</span><span class="o">&gt;</span><span class="p">;</span>
<span class="k">using</span><span class="w"> </span><span class="n">char_vector</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">boost</span><span class="o">::</span><span class="n">interprocess</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">char</span><span class="p">,</span><span class="w"> </span><span class="n">char_allocator</span><span class="o">&gt;</span><span class="p">;</span>

<span class="cp">#define SEGMENT_MAX_SIZE 100 * 1024 * 1024</span>
<span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">kMagicNumber_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">123456</span><span class="p">;</span>

<span class="k">struct</span><span class="w"> </span><span class="nc">SharedSegment</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">boost</span><span class="o">::</span><span class="n">interprocess</span><span class="o">::</span><span class="n">managed_shared_memory</span><span class="w"> </span><span class="n">segment_</span><span class="p">;</span>
<span class="w">  </span><span class="n">boost</span><span class="o">::</span><span class="n">interprocess</span><span class="o">::</span><span class="n">interprocess_sharable_mutex</span><span class="o">*</span><span class="w"> </span><span class="n">mtx_</span><span class="p">;</span>
<span class="w">  </span><span class="n">char_vector</span><span class="o">*</span><span class="w"> </span><span class="n">ptr_</span><span class="p">;</span>

<span class="w">  </span><span class="n">SharedSegment</span><span class="p">()</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">mtx_</span><span class="p">(</span><span class="mi">0</span><span class="p">),</span><span class="w"> </span><span class="n">ptr_</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>
<span class="p">};</span>

<span class="n">SharedMemoryWriter</span><span class="o">::</span><span class="n">SharedMemoryWriter</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">shared_segment_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SharedSegment</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>

<span class="n">SharedMemoryWriter</span><span class="o">::~</span><span class="n">SharedMemoryWriter</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">remove</span><span class="p">();</span>
<span class="w">  </span><span class="k">delete</span><span class="w"> </span><span class="n">shared_segment_</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">bool</span><span class="w"> </span><span class="n">SharedMemoryWriter</span><span class="o">::</span><span class="n">init</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">key</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">microsecond</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">key_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">key</span><span class="p">;</span>
<span class="w">  </span><span class="n">mtx_key_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;.mtx&quot;</span><span class="p">;</span>
<span class="w">  </span><span class="n">max_lock_wait_microsecond_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">microsecond</span><span class="p">;</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="n">reset</span><span class="p">();</span>
<span class="p">}</span>

<span class="kt">bool</span><span class="w"> </span><span class="n">SharedMemoryWriter</span><span class="o">::</span><span class="n">reset</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">shared_segment_</span><span class="o">-&gt;</span><span class="n">segment_</span><span class="w"> </span><span class="o">=</span>
<span class="w">        </span><span class="n">boost</span><span class="o">::</span><span class="n">interprocess</span><span class="o">::</span><span class="n">managed_shared_memory</span><span class="p">(</span><span class="n">boost</span><span class="o">::</span><span class="n">interprocess</span><span class="o">::</span><span class="n">open_or_create</span><span class="p">,</span><span class="w"> </span><span class="n">key_</span><span class="p">.</span><span class="n">c_str</span><span class="p">(),</span><span class="w"> </span><span class="n">SEGMENT_MAX_SIZE</span><span class="p">);</span>
<span class="w">    </span><span class="n">shared_segment_</span><span class="o">-&gt;</span><span class="n">ptr_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">shared_segment_</span><span class="o">-&gt;</span><span class="n">segment_</span><span class="p">.</span><span class="n">find_or_construct</span><span class="o">&lt;</span><span class="n">char_vector</span><span class="o">&gt;</span><span class="p">(</span><span class="n">key_</span><span class="p">.</span><span class="n">c_str</span><span class="p">())(</span>
<span class="w">        </span><span class="n">shared_segment_</span><span class="o">-&gt;</span><span class="n">segment_</span><span class="p">.</span><span class="n">get_segment_manager</span><span class="p">());</span>
<span class="w">    </span><span class="c1">// shared_segment_-&gt;mtx_ =</span>
<span class="w">    </span><span class="c1">// shared_segment_-&gt;segment_.find_or_construct&lt;boost::interprocess::interprocess_sharable_mutex&gt; \</span>
<span class="c1">			(mtx_key_.c_str())();</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">shared_segment_</span><span class="o">-&gt;</span><span class="n">ptr_</span><span class="p">)</span><span class="w"> </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;SharedMemory write init success</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="cm">/*shared_segment_-&gt;mtx_ &amp;&amp; */</span><span class="w"> </span><span class="n">shared_segment_</span><span class="o">-&gt;</span><span class="n">ptr_</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(...)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;SharedMemory write init failed</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">bool</span><span class="w"> </span><span class="n">SharedMemoryWriter</span><span class="o">::</span><span class="n">write</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">uint8_t</span><span class="o">&gt;&amp;</span><span class="w"> </span><span class="n">buffer</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">int64_t</span><span class="w"> </span><span class="n">timestamp</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">using</span><span class="w"> </span><span class="k">namespace</span><span class="w"> </span><span class="nn">boost</span><span class="o">::</span><span class="nn">interprocess</span><span class="p">;</span>
<span class="w">  </span><span class="k">using</span><span class="w"> </span><span class="k">namespace</span><span class="w"> </span><span class="nn">boost</span><span class="o">::</span><span class="nn">posix_time</span><span class="p">;</span>

<span class="w">  </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">shared_segment_</span><span class="o">-&gt;</span><span class="n">ptr_</span><span class="p">)</span>
<span class="w">    </span><span class="c1">// while (!shared_segment_-&gt;mtx_-&gt;timed_lock(microsec_clock::universal_time() +</span>
<span class="w">    </span><span class="c1">// microseconds(max_lock_wait_microsecond_)))</span>
<span class="w">    </span><span class="p">{</span>
<span class="w">      </span><span class="c1">// printf(&quot;SharedMemeory icannot get lock,remove lock\n&quot;);</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">reset</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;SharedMemory write init failed</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">shared_segment_</span><span class="o">-&gt;</span><span class="n">ptr_</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="kt">int</span><span class="w"> </span><span class="n">sz</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">buffer</span><span class="p">.</span><span class="n">size</span><span class="p">();</span>
<span class="w">      </span><span class="kt">int</span><span class="w"> </span><span class="n">ptr_sz</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="kt">int64_t</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">sz</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1024</span><span class="p">;</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">shared_segment_</span><span class="o">-&gt;</span><span class="n">ptr_</span><span class="o">-&gt;</span><span class="n">size</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">ptr_sz</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">shared_segment_</span><span class="o">-&gt;</span><span class="n">ptr_</span><span class="o">-&gt;</span><span class="n">resize</span><span class="p">(</span><span class="n">ptr_sz</span><span class="p">);</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">      </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">buf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">shared_segment_</span><span class="o">-&gt;</span><span class="n">ptr_</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">();</span>
<span class="w">      </span><span class="n">memcpy</span><span class="p">(</span><span class="n">buf</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">kMagicNumber_</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">));</span>
<span class="w">      </span><span class="n">buf</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">);</span>
<span class="w">      </span><span class="n">memcpy</span><span class="p">(</span><span class="n">buf</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">timestamp</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="kt">int64_t</span><span class="p">));</span>
<span class="w">      </span><span class="n">buf</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="kt">int64_t</span><span class="p">);</span>
<span class="w">      </span><span class="n">memcpy</span><span class="p">(</span><span class="n">buf</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">sz</span><span class="p">,</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">));</span>
<span class="w">      </span><span class="n">buf</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">);</span>
<span class="w">      </span><span class="n">memcpy</span><span class="p">(</span><span class="n">buf</span><span class="p">,</span><span class="w"> </span><span class="n">buffer</span><span class="p">.</span><span class="n">data</span><span class="p">(),</span><span class="w"> </span><span class="n">sz</span><span class="p">);</span>
<span class="w">      </span><span class="c1">// shared_segment_-&gt;mtx_-&gt;unlock();</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(...)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;SharedMemory write failed</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="c1">// shared_segment_-&gt;mtx_-&gt;unlock();</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">bool</span><span class="w"> </span><span class="n">SharedMemoryWriter</span><span class="o">::</span><span class="n">remove</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="c1">// if (shared_segment_)</span>
<span class="w">  </span><span class="c1">//{</span>
<span class="w">  </span><span class="c1">//  if(shared_segment_-&gt;ptr_)</span>
<span class="w">  </span><span class="c1">//    shared_segment_-&gt;segment_.destroy_ptr(shared_segment_-&gt;ptr_);</span>
<span class="w">  </span><span class="c1">//  //if(shared_segment_-&gt;mtx_)</span>
<span class="w">  </span><span class="c1">//  //  shared_segment_-&gt;segment_.destroy_ptr(shared_segment_-&gt;mtx_);</span>
<span class="w">  </span><span class="c1">//  shared_segment_-&gt;ptr_ = 0;</span>
<span class="w">  </span><span class="c1">//  shared_segment_-&gt;mtx_ = 0;</span>
<span class="w">  </span><span class="c1">// }</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span><span class="w">  </span><span class="c1">// boost::interprocess::shared_memory_object::remove(key_.c_str());</span>
<span class="p">}</span>

<span class="n">SharedMemoryReader</span><span class="o">::</span><span class="n">SharedMemoryReader</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">shared_segment_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">SharedSegment</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>

<span class="n">SharedMemoryReader</span><span class="o">::~</span><span class="n">SharedMemoryReader</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="k">delete</span><span class="w"> </span><span class="n">shared_segment_</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>

<span class="kt">bool</span><span class="w"> </span><span class="n">SharedMemoryReader</span><span class="o">::</span><span class="n">init</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="o">&amp;</span><span class="w"> </span><span class="n">key</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">microsecond</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">key_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">key</span><span class="p">;</span>
<span class="w">  </span><span class="n">mtx_key_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">key</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;.mtx&quot;</span><span class="p">;</span>
<span class="w">  </span><span class="n">max_lock_wait_microsecond_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">microsecond</span><span class="p">;</span>
<span class="w">  </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;init...</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span><span class="w">  </span><span class="c1">// reset();</span>
<span class="p">}</span>

<span class="kt">bool</span><span class="w"> </span><span class="n">SharedMemoryReader</span><span class="o">::</span><span class="n">reset</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;reset..</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w">  </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">shared_segment_</span><span class="o">-&gt;</span><span class="n">segment_</span><span class="w"> </span><span class="o">=</span>
<span class="w">        </span><span class="n">boost</span><span class="o">::</span><span class="n">interprocess</span><span class="o">::</span><span class="n">managed_shared_memory</span><span class="p">(</span><span class="n">boost</span><span class="o">::</span><span class="n">interprocess</span><span class="o">::</span><span class="n">open_read_only</span><span class="p">,</span><span class="w"> </span><span class="n">key_</span><span class="p">.</span><span class="n">c_str</span><span class="p">());</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;managed_shared_memory create</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="n">shared_segment_</span><span class="o">-&gt;</span><span class="n">ptr_</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">shared_segment_</span><span class="o">-&gt;</span><span class="n">segment_</span><span class="p">.</span><span class="n">find</span><span class="o">&lt;</span><span class="n">char_vector</span><span class="o">&gt;</span><span class="p">(</span><span class="n">key_</span><span class="p">.</span><span class="n">c_str</span><span class="p">()).</span><span class="n">first</span><span class="p">;</span>
<span class="w">    </span><span class="c1">/// shared_segment_-&gt;mtx_ = shared_segment_-&gt;segment_.find&lt;boost::interprocess::interprocess_sharable_mutex&gt;</span>
<span class="w">    </span><span class="c1">//	(mtx_key_.c_str()).first;</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;shared_memory find</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="cm">/*shared_segment_-&gt;mtx_ &amp;&amp; */</span><span class="w"> </span><span class="n">shared_segment_</span><span class="o">-&gt;</span><span class="n">ptr_</span><span class="p">)</span><span class="w"> </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;SharedMemory read init success</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="cm">/*shared_segment_-&gt;mtx_ &amp;&amp; */</span><span class="w"> </span><span class="n">shared_segment_</span><span class="o">-&gt;</span><span class="n">ptr_</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(...)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;SharedMemory reader init failed</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>

<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">bool</span><span class="w"> </span><span class="n">SharedMemoryReader</span><span class="o">::</span><span class="n">read</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">uint8_t</span><span class="o">&gt;&amp;</span><span class="w"> </span><span class="n">buffer</span><span class="p">,</span><span class="w"> </span><span class="kt">int64_t</span><span class="o">&amp;</span><span class="w"> </span><span class="n">timestamp</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">using</span><span class="w"> </span><span class="k">namespace</span><span class="w"> </span><span class="nn">boost</span><span class="o">::</span><span class="nn">interprocess</span><span class="p">;</span>
<span class="w">  </span><span class="k">using</span><span class="w"> </span><span class="k">namespace</span><span class="w"> </span><span class="nn">boost</span><span class="o">::</span><span class="nn">posix_time</span><span class="p">;</span>
<span class="w">  </span><span class="k">try</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="cm">/*while (!shared_segment_-&gt;mtx_ ||</span>
<span class="cm">            !shared_segment_-&gt;mtx_-&gt;timed_lock_sharable(microsec_clock::universal_time() +</span>
<span class="cm">    microseconds(max_lock_wait_microsecond_)))</span>
<span class="cm">    {</span>
<span class="cm">            printf(&quot;SharedMemeory icannot get lock,remove lock\n&quot;);</span>
<span class="cm">            if (!reset())</span>
<span class="cm">            {</span>
<span class="cm">                    return false;</span>
<span class="cm">            }</span>
<span class="cm">    }*/</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">shared_segment_</span><span class="o">-&gt;</span><span class="n">ptr_</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">reset</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>

<span class="w">    </span><span class="n">buffer</span><span class="p">.</span><span class="n">clear</span><span class="p">();</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">shared_segment_</span><span class="o">-&gt;</span><span class="n">ptr_</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="kt">int</span><span class="w"> </span><span class="n">ptr_sz</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="kt">int64_t</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">);</span>
<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">shared_segment_</span><span class="o">-&gt;</span><span class="n">ptr_</span><span class="o">-&gt;</span><span class="n">size</span><span class="p">()</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="n">ptr_sz</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kt">char</span><span class="o">*</span><span class="w"> </span><span class="n">buf</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">shared_segment_</span><span class="o">-&gt;</span><span class="n">ptr_</span><span class="o">-&gt;</span><span class="n">data</span><span class="p">();</span>
<span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="p">(</span><span class="kt">int</span><span class="o">*</span><span class="p">)(</span><span class="n">buf</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">kMagicNumber_</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">          </span><span class="n">buf</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">);</span>
<span class="w">          </span><span class="n">timestamp</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">*</span><span class="p">(</span><span class="kt">int64_t</span><span class="o">*</span><span class="p">)</span><span class="n">buf</span><span class="p">;</span>
<span class="w">          </span><span class="n">buf</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="kt">int64_t</span><span class="p">);</span>
<span class="w">          </span><span class="kt">int</span><span class="w"> </span><span class="n">sz</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">*</span><span class="p">(</span><span class="kt">int</span><span class="o">*</span><span class="p">)</span><span class="n">buf</span><span class="p">;</span>
<span class="w">          </span><span class="n">buf</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">);</span>
<span class="w">          </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">shared_segment_</span><span class="o">-&gt;</span><span class="n">ptr_</span><span class="o">-&gt;</span><span class="n">size</span><span class="p">()</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="p">(</span><span class="n">ptr_sz</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">sz</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="n">buffer</span><span class="p">.</span><span class="n">resize</span><span class="p">(</span><span class="n">sz</span><span class="p">);</span>
<span class="w">            </span><span class="n">memcpy</span><span class="p">(</span><span class="n">buffer</span><span class="p">.</span><span class="n">data</span><span class="p">(),</span><span class="w"> </span><span class="n">buf</span><span class="p">,</span><span class="w"> </span><span class="n">sz</span><span class="p">);</span>
<span class="w">          </span><span class="p">}</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">      </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="c1">// shared_segment_-&gt;mtx_-&gt;unlock_sharable();</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="o">!</span><span class="n">buffer</span><span class="p">.</span><span class="n">empty</span><span class="p">();</span>
<span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">catch</span><span class="w"> </span><span class="p">(...)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;SharedMemory read failed</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w">    </span><span class="c1">// shared_segment_-&gt;mtx_-&gt;unlock();</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</section>
<section id="id6">
<h4>6.1.2.2 ç£ç›˜ä¿å­˜<a class="headerlink" href="#id6" title="Link to this heading">ïƒ</a></h4>
<p>æ‘„åƒå¤´ä»¿çœŸåŒæ—¶æ”¯æŒç£ç›˜ä¿å­˜æ–¹å¼, ä½†ç”±äºå›¾åƒæ•°æ® IO å¾ˆå¤§, ä¸”å›¾åƒ jpeg å‹ç¼©ä¹Ÿä¼šæ¶ˆè€—æ€§èƒ½, æš‚ä¸æ¨èæ­¤æ–¹å¼.</p>
<p>åœ¨ Game.ini ä¸­æ·»åŠ å¦‚ä¸‹å†…å®¹:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[Sensor]</span>
<span class="na">CameraSaved</span><span class="o">=</span><span class="s">true</span>
</pre></div>
</div>
<p>é‡å¯ä»¿çœŸè½¯ä»¶, å›¾åƒæ•°æ®å³ä¿å­˜äº:</p>
<ul class="simple">
<li><p>Windows ä¸‹:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">C:\Users\ç”¨æˆ·å\AppData\Roaming\tadsim\service_data\display\Saved\SensorData</span></code></p></li>
</ul>
</li>
<li><p>Ubuntu ä¸‹:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">/home/.config/tadsim/Display/Saved/SensorData</span></code></p></li>
</ul>
</li>
</ul>
</section>
<section id="pb">
<h4>6.1.2.3 PB æ¶ˆæ¯<a class="headerlink" href="#pb" title="Link to this heading">ïƒ</a></h4>
<p>é¦–å…ˆéœ€è¦æ‰“å¼€ Display çš„ PB å¹¿æ’­åŠŸèƒ½, åœ¨ Game.ini ä¸­æ·»åŠ å¦‚ä¸‹å†…å®¹:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[Sensor]</span>
<span class="na">PublicMsg</span><span class="o">=</span><span class="s">true</span>
</pre></div>
</div>
<p>ç„¶åé€šè¿‡è®¢é˜…ç³»ç»Ÿçš„æ¶ˆæ¯, æ¥è·å–ä¼ æ„Ÿå™¨æ•°æ® .TOPIC ä¸º <code class="docutils literal notranslate"><span class="pre">DISPLAYSENSOR_{id}</span></code>,  å…¶ä¸­ id æ˜¯ç®—æ³•çš„ id, é€šè¿‡ Display æ¨¡å—çš„è¿è¡Œå‚æ•° -topicid æŒ‡å®š, é»˜è®¤ä¸º 0.</p>
<p>SensorPose è¯¦ç»†å®šä¹‰:</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>å­—æ®µ</th>
<th>ç±»å‹</th>
<th>å•ä½</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>longitude</td>
<td>double</td>
<td>deg</td>
<td>ç»åº¦</td>
</tr>
<tr>
<td>latitude</td>
<td>double</td>
<td>deg</td>
<td>çº¬åº¦</td>
</tr>
<tr>
<td>altitude</td>
<td>double</td>
<td>m</td>
<td>é«˜ç¨‹</td>
</tr>
<tr>
<td>roll</td>
<td>float</td>
<td>rad</td>
<td>æ»šè§’</td>
</tr>
<tr>
<td>pitch</td>
<td>float</td>
<td>rad</td>
<td>ä¿¯ä»°è§’</td>
</tr>
<tr>
<td>yaw</td>
<td>float</td>
<td>rad</td>
<td>èˆªå‘è§’</td>
</tr>
</tbody>
</table>
<p>Cameraè¯¦ç»†æ•°æ®å®šä¹‰:</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>å­—æ®µ</th>
<th>ç±»å‹</th>
<th>å•ä½</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>id</td>
<td>int32</td>
<td></td>
<td>ä¼ æ„Ÿå™¨ID</td>
</tr>
<tr>
<td>timestamp</td>
<td>double</td>
<td>ms</td>
<td>æ—¶é—´æˆ³</td>
</tr>
<tr>
<td>type</td>
<td>string</td>
<td>string</td>
<td>å›¾ç‰‡ç¼–ç ç±»å‹JPEG, PNG, EXR, BGRA</td>
</tr>
<tr>
<td>image_data</td>
<td>bytes</td>
<td>äºŒè¿›åˆ¶</td>
<td>å›¾åƒæ•°æ®</td>
</tr>
<tr>
<td>width</td>
<td>int32</td>
<td>åƒç´ </td>
<td>å›¾åƒå®½</td>
</tr>
<tr>
<td>height</td>
<td>int32</td>
<td>åƒç´ </td>
<td>å›¾åƒé«˜</td>
</tr>
<tr>
<td>pose</td>
<td>SensorPose</td>
<td></td>
<td>ä½å§¿</td>
</tr>
</tbody>
</table>
<!-- å‚è€ƒ: https://myst-parser.readthedocs.io/en/latest/syntax/code_and_apis.html#including-code-from-files -->
<p>ä»£ç ç¤ºä¾‹:</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;sensor.h&quot;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;algorithm&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;boost/filesystem.hpp&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;fstream&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;iostream&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;map&gt;</span>
<span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;sensor_raw.pb.h&quot;</span>

<span class="n">sim_sensor</span><span class="o">::</span><span class="n">sim_sensor</span><span class="p">()</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">threads</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span><span class="w"> </span><span class="p">{}</span>

<span class="n">sim_sensor</span><span class="o">::~</span><span class="n">sim_sensor</span><span class="p">()</span><span class="w"> </span><span class="p">{}</span>

<span class="kt">void</span><span class="w"> </span><span class="n">sim_sensor</span><span class="o">::</span><span class="n">Init</span><span class="p">(</span><span class="n">tx_sim</span><span class="o">::</span><span class="n">InitHelper</span><span class="o">&amp;</span><span class="w"> </span><span class="n">helper</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">auto</span><span class="w"> </span><span class="n">NumOfDisplay</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">helper</span><span class="p">.</span><span class="n">GetParameter</span><span class="p">(</span><span class="s">&quot;NumOfDisplay&quot;</span><span class="p">);</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">NumOfDisplay</span><span class="p">.</span><span class="n">empty</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">disNum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">atoi</span><span class="p">(</span><span class="n">NumOfDisplay</span><span class="p">.</span><span class="n">c_str</span><span class="p">());</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="n">savePath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">helper</span><span class="p">.</span><span class="n">GetParameter</span><span class="p">(</span><span class="s">&quot;SavePath&quot;</span><span class="p">);</span>
<span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">disNum</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">helper</span><span class="p">.</span><span class="n">Subscribe</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">(</span><span class="s">&quot;DISPLAYSENSOR_&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">to_string</span><span class="p">(</span><span class="n">i</span><span class="p">));</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">boost</span><span class="o">::</span><span class="n">filesystem</span><span class="o">::</span><span class="n">exists</span><span class="p">(</span><span class="n">savePath</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">boost</span><span class="o">::</span><span class="n">filesystem</span><span class="o">::</span><span class="n">create_directory</span><span class="p">(</span><span class="n">savePath</span><span class="p">);</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="kt">void</span><span class="w"> </span><span class="n">sim_sensor</span><span class="o">::</span><span class="n">Reset</span><span class="p">(</span><span class="n">tx_sim</span><span class="o">::</span><span class="n">ResetHelper</span><span class="o">&amp;</span><span class="w"> </span><span class="n">helper</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;reset</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>

<span class="kt">void</span><span class="w"> </span><span class="n">saveJpg</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">fname</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">buf</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">sim_msg</span><span class="o">::</span><span class="n">CameraRaw</span><span class="w"> </span><span class="n">camera</span><span class="p">;</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">camera</span><span class="p">.</span><span class="n">ParseFromString</span><span class="p">(</span><span class="n">buf</span><span class="p">))</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;camera error&quot;</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">camera</span><span class="p">.</span><span class="n">type</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;JPEG&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">fstream</span><span class="w"> </span><span class="nf">of</span><span class="p">(</span><span class="n">fname</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">ios</span><span class="o">::</span><span class="n">out</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">ios</span><span class="o">::</span><span class="n">binary</span><span class="p">);</span>
<span class="w">    </span><span class="n">of</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="n">camera</span><span class="p">.</span><span class="n">image_data</span><span class="p">().</span><span class="n">c_str</span><span class="p">(),</span><span class="w"> </span><span class="n">camera</span><span class="p">.</span><span class="n">image_data</span><span class="p">().</span><span class="n">size</span><span class="p">());</span>
<span class="w">    </span><span class="n">of</span><span class="p">.</span><span class="n">close</span><span class="p">();</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>

<span class="kt">bool</span><span class="w"> </span><span class="n">savePcd</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">fname</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">buf</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">sim_msg</span><span class="o">::</span><span class="n">LidarRaw</span><span class="w"> </span><span class="n">lidar</span><span class="p">;</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">lidar</span><span class="p">.</span><span class="n">ParseFromString</span><span class="p">(</span><span class="n">buf</span><span class="p">))</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;lidar error&quot;</span><span class="p">;</span>

<span class="w">  </span><span class="kt">size_t</span><span class="w"> </span><span class="n">num</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">lidar</span><span class="p">.</span><span class="n">count</span><span class="p">();</span>

<span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">ofstream</span><span class="w"> </span><span class="nf">of</span><span class="p">(</span><span class="n">fname</span><span class="p">);</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="o">!</span><span class="n">of</span><span class="p">.</span><span class="n">good</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="nb">false</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>
<span class="w">  </span><span class="n">of</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;# .PCD v.7 - Point Cloud Data file format</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>
<span class="w">  </span><span class="n">of</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;VERSION 0.7</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>
<span class="w">  </span><span class="n">of</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;FIELDS x y z intensity label</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>
<span class="w">  </span><span class="n">of</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;SIZE 4 4 4 4 4</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>
<span class="w">  </span><span class="n">of</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;TYPE F F F F I</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>
<span class="w">  </span><span class="n">of</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;COUNT 1 1 1 1 1</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>
<span class="w">  </span><span class="n">of</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;WIDTH &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">num</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>
<span class="w">  </span><span class="n">of</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;HEIGHT 1</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>
<span class="w">  </span><span class="n">of</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;VIEWPOINT 0 0 0 1 -1 0 0</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>
<span class="w">  </span><span class="n">of</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;POINTS &quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">num</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>
<span class="w">  </span><span class="n">of</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;DATA binary</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>

<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">lidar</span><span class="p">.</span><span class="n">point_lists</span><span class="p">().</span><span class="n">size</span><span class="p">()</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">of</span><span class="p">.</span><span class="n">write</span><span class="p">((</span><span class="kt">char</span><span class="o">*</span><span class="p">)</span><span class="n">lidar</span><span class="p">.</span><span class="n">point_lists</span><span class="p">().</span><span class="n">data</span><span class="p">(),</span><span class="w"> </span><span class="n">lidar</span><span class="p">.</span><span class="n">point_lists</span><span class="p">().</span><span class="n">size</span><span class="p">());</span>
<span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="p">{</span>
<span class="cp">#pragma pack(push, 4)</span>
<span class="w">    </span><span class="k">struct</span><span class="w"> </span><span class="nc">TMP</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="kt">float</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">      </span><span class="kt">float</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">      </span><span class="kt">float</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="w">      </span><span class="kt">float</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w">          </span><span class="c1">// intensity</span>
<span class="w">      </span><span class="n">std</span><span class="o">::</span><span class="kt">uint32_t</span><span class="w"> </span><span class="n">t</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w">  </span><span class="c1">// type</span>
<span class="w">    </span><span class="p">};</span>
<span class="cp">#pragma pack(pop)</span>

<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">TMP</span><span class="o">&gt;</span><span class="w"> </span><span class="n">datas</span><span class="p">;</span>
<span class="w">    </span><span class="n">datas</span><span class="p">.</span><span class="n">reserve</span><span class="p">(</span><span class="n">num</span><span class="p">);</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="o">&amp;</span><span class="w"> </span><span class="n">p</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">lidar</span><span class="p">.</span><span class="n">points</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">TMP</span><span class="w"> </span><span class="n">tmp</span><span class="p">;</span>
<span class="w">      </span><span class="n">tmp</span><span class="p">.</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">x</span><span class="p">();</span>
<span class="w">      </span><span class="n">tmp</span><span class="p">.</span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">y</span><span class="p">();</span>
<span class="w">      </span><span class="n">tmp</span><span class="p">.</span><span class="n">z</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">z</span><span class="p">();</span>
<span class="w">      </span><span class="n">tmp</span><span class="p">.</span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">i</span><span class="p">();</span>
<span class="w">      </span><span class="n">tmp</span><span class="p">.</span><span class="n">t</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">p</span><span class="p">.</span><span class="n">t</span><span class="p">();</span>
<span class="w">      </span><span class="n">datas</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">tmp</span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="n">of</span><span class="p">.</span><span class="n">write</span><span class="p">((</span><span class="kt">char</span><span class="o">*</span><span class="p">)</span><span class="n">datas</span><span class="p">.</span><span class="n">data</span><span class="p">(),</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">num</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">sizeof</span><span class="p">(</span><span class="kt">float</span><span class="p">));</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="n">of</span><span class="p">.</span><span class="n">close</span><span class="p">();</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nb">true</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span><span class="w"> </span><span class="n">sim_sensor</span><span class="o">::</span><span class="n">Step</span><span class="p">(</span><span class="n">tx_sim</span><span class="o">::</span><span class="n">StepHelper</span><span class="o">&amp;</span><span class="w"> </span><span class="n">helper</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">helper</span><span class="p">.</span><span class="n">timestamp</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;: &quot;</span><span class="p">;</span>

<span class="w">  </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">disNum</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">payload_</span><span class="p">;</span>
<span class="w">    </span><span class="n">helper</span><span class="p">.</span><span class="n">GetSubscribedMessage</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="p">(</span><span class="s">&quot;DISPLAYSENSOR_&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">to_string</span><span class="p">(</span><span class="n">i</span><span class="p">),</span><span class="w"> </span><span class="n">payload_</span><span class="p">);</span>
<span class="w">    </span><span class="n">sim_msg</span><span class="o">::</span><span class="n">SensorRaw</span><span class="w"> </span><span class="n">sensorraw</span><span class="p">;</span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">payload_</span><span class="p">.</span><span class="n">empty</span><span class="p">()</span><span class="w"> </span><span class="o">||</span><span class="w"> </span><span class="o">!</span><span class="n">sensorraw</span><span class="p">.</span><span class="n">ParseFromString</span><span class="p">(</span><span class="n">payload_</span><span class="p">))</span><span class="w"> </span><span class="k">continue</span><span class="p">;</span>

<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">string</span><span class="w"> </span><span class="n">baseName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">savePath</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;/&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">to_string</span><span class="p">(</span><span class="n">helper</span><span class="p">.</span><span class="n">timestamp</span><span class="p">());</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;[&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;: &quot;</span><span class="p">;</span>
<span class="w">    </span><span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="k">auto</span><span class="o">&amp;</span><span class="w"> </span><span class="n">sensor</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">sensorraw</span><span class="p">.</span><span class="n">sensor</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">      </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;(&quot;</span><span class="p">;</span>

<span class="w">      </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">sensor</span><span class="p">.</span><span class="n">type</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">sim_msg</span><span class="o">::</span><span class="n">SensorRaw</span><span class="o">::</span><span class="n">TYPE_CAMERA</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">threads</span><span class="p">.</span><span class="n">enqueue</span><span class="p">(</span><span class="n">saveJpg</span><span class="p">,</span><span class="w"> </span><span class="n">baseName</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;_camera_&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">to_string</span><span class="p">(</span><span class="n">sensor</span><span class="p">.</span><span class="n">id</span><span class="p">())</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;.jpg&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">sensor</span><span class="p">.</span><span class="n">raw</span><span class="p">());</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;camera=&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">sensor</span><span class="p">.</span><span class="n">raw</span><span class="p">().</span><span class="n">size</span><span class="p">();</span>
<span class="w">      </span><span class="p">}</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">sensor</span><span class="p">.</span><span class="n">type</span><span class="p">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">sim_msg</span><span class="o">::</span><span class="n">SensorRaw</span><span class="o">::</span><span class="n">TYPE_LIDAR</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="n">threads</span><span class="p">.</span><span class="n">enqueue</span><span class="p">(</span><span class="n">savePcd</span><span class="p">,</span><span class="w"> </span><span class="n">baseName</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;_lidar_&quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">to_string</span><span class="p">(</span><span class="n">sensor</span><span class="p">.</span><span class="n">id</span><span class="p">())</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s">&quot;.pcd&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">sensor</span><span class="p">.</span><span class="n">raw</span><span class="p">());</span>
<span class="w">        </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;lidar=&quot;</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">sensor</span><span class="p">.</span><span class="n">raw</span><span class="p">().</span><span class="n">size</span><span class="p">();</span>
<span class="w">      </span><span class="p">}</span>

<span class="w">      </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;), &quot;</span><span class="p">;</span>
<span class="w">    </span><span class="p">}</span>
<span class="w">    </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;], &quot;</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span>

<span class="w">  </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span><span class="w"> </span><span class="n">sim_sensor</span><span class="o">::</span><span class="n">Stop</span><span class="p">(</span><span class="n">tx_sim</span><span class="o">::</span><span class="n">StopHelper</span><span class="o">&amp;</span><span class="w"> </span><span class="n">helper</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="n">cout</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s">&quot;stop.</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span><span class="w"> </span><span class="p">}</span>

<span class="n">TXSIM_MODULE</span><span class="p">(</span><span class="n">sim_sensor</span><span class="p">)</span>
</pre></div>
</div>
</section>
<section id="gpu">
<h4>6.1.2.4 GPU æ˜¾å­˜å…±äº«<a class="headerlink" href="#gpu" title="Link to this heading">ïƒ</a></h4>
<p><strong>a. IPC æ¦‚å¿µ</strong></p>
<p>CUDA IPC æœºåˆ¶å…è®¸å°†è®¾å¤‡å†…å­˜åˆ†é…ä»ä¸€ä¸ªè¿›ç¨‹å…±äº«åˆ°å¦ä¸€ä¸ªè¿›ç¨‹. è§<a class="reference external" href="https://github.com/NVIDIA/cuda-samples/tree/master/Samples/0_Introduction/simpleIPC">å®˜æ–¹ä¾‹å­</a>.</p>
<p>æ‰€éœ€çš„æ­¥éª¤å¤§è‡´å¦‚ä¸‹:</p>
<ul class="simple">
<li><p>è¿›ç¨‹ A åˆ†é… GPU æ˜¾å­˜.</p></li>
<li><p>è¿›ç¨‹ A è·å–æ­¥éª¤ 1 ä¸­åˆ†é…çš„ CUDA IPC å¥æŸ„ (handle).</p></li>
<li><p>è¿›ç¨‹ A åˆ›å»ºä¸€ä¸ªå…±äº«å†…å­˜, ä»¥ä¾¿å¯ä»¥å°†æ­¥éª¤ 2 ä¸­çš„å¥æŸ„ä¼ é€ç»™è¿›ç¨‹ B.</p></li>
<li><p>è¿›ç¨‹ A å°†å¥æŸ„æ”¾å…¥å…±äº«å†…å­˜.</p></li>
<li><p>è¿›ç¨‹ B ä»å…±äº«å†…å­˜ä¸­é€‰å–å¥æŸ„.</p></li>
<li><p>è¿›ç¨‹ B ä½¿ç”¨å¥æŸ„è®¿é—® CUDA å…±äº«æ˜¾å­˜.</p></li>
</ul>
<p>å›¾åƒæ•°æ®, é€šè¿‡ IPC æ–¹å¼, ä¼ é€’ç»™æ„ŸçŸ¥ç®—æ³•, è¦æ±‚æ„ŸçŸ¥ç®—æ³•å’Œ Display æ¨¡å—åœ¨åŒä¸€æ˜¾å¡ä¸­, é¿å…äº†å›¾åƒä¼ è¾“çš„å»¶æ—¶.</p>
<div class="admonition note">
<p class="admonition-title">å¤‡æ³¨</p>
<p>æ³¨: IPC åŠŸèƒ½ä»…é™ Linux. ä¸Šè¿°æ­¥éª¤ä¸­, è¿›ç¨‹ A ä¸º Display ç¨‹åº, è¿›ç¨‹ B ä¸ºç”¨æˆ·çš„ç¨‹åº.</p>
</div>
<p><strong>b. IPC ä¿¡æ¯äº¤æ¢</strong></p>
<p>Display åˆ›å»ºçš„å…±äº«å†…å­˜ (éæ˜¾å­˜) åœ°å€ä¸º: <code class="docutils literal notranslate"><span class="pre">Tadsim_Camera_{ID}_GPU</span></code>, ç”¨æˆ·ç¨‹åºä»è¯¥åœ°å€è·å– IPC å¿…è¦çš„ä¿¡æ¯, åˆ›å»ºæ˜¾å­˜è®¿é—®æƒé™.</p>
<p>ä¾‹å¦‚ id ä¸º 0 çš„ camera ä¸º <code class="docutils literal notranslate"><span class="pre">Tadsim_Camera_0_GPU</span></code>, è¯¥æ•°æ®åœ¨ <code class="docutils literal notranslate"><span class="pre">reset</span></code> å’Œ <code class="docutils literal notranslate"><span class="pre">step</span></code> é˜¶æ®µæœ‰æ•ˆ.</p>
<table border="1" class="docutils">
<thead>
<tr>
<th>å­—æ®µ</th>
<th>åç§»</th>
<th>ç±»å‹</th>
<th>é•¿åº¦</th>
<th>å«ä¹‰</th>
</tr>
</thead>
<tbody>
<tr>
<td>tag=123456</td>
<td>0</td>
<td>int</td>
<td>4</td>
<td>æ ‡è¯†</td>
</tr>
<tr>
<td>timestamp</td>
<td>4</td>
<td>int64</td>
<td>8</td>
<td>æ—¶é—´æˆ³</td>
</tr>
<tr>
<td>size</td>
<td>12</td>
<td>int</td>
<td>4</td>
<td>åç»­bufçš„é•¿åº¦ = 1024</td>
</tr>
<tr>
<td>imgWidth</td>
<td>16</td>
<td>int</td>
<td>4</td>
<td>å›¾åƒå®½</td>
</tr>
<tr>
<td>imgHeight</td>
<td>20</td>
<td>int</td>
<td>4</td>
<td>å›¾åƒé«˜</td>
</tr>
<tr>
<td>memHandle</td>
<td>24</td>
<td>cudaIpcMemHandle_t</td>
<td>64</td>
<td>æ˜¾å­˜åœ°å€å¥æŸ„</td>
</tr>
<tr>
<td>eventHandle</td>
<td>88</td>
<td>cudaIpcEventHandle_t</td>
<td>64</td>
<td>äº‹ä»¶å¥æŸ„</td>
</tr>
<tr>
<td>reserved</td>
<td>152</td>
<td></td>
<td>888</td>
<td>ä¿ç•™, æ— æ„ä¹‰</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">å¤‡æ³¨</p>
<p>æ³¨: åœ¨ reset é˜¶æ®µ, timestamp ä¿å­˜çš„æ˜¯ Display æ‰§è¡Œ reset çš„å½“å‰ unix æ—¶é—´, åœ¨ step é˜¶æ®µ, timestamp ä¿å­˜çš„æ˜¯å½“å‰çš„ step é€»è¾‘æ—¶é—´. ç”±äº Display reset è¾ƒæ…¢, ç”¨æˆ·æ¨¡å—åŠ¡å¿…è¦æ ¡éªŒ timestamp æ˜¯å¦æ˜¯å½“å‰æ—¶é—´, å¦åˆ™æ‹¿åˆ°çš„å…±äº«æ•°æ®å¯èƒ½æ˜¯æ—§çš„. TAD Sim è‡ªå¸¦çš„ä¾‹å­é‡Œå®ç°äº† reset æ ¡éªŒå’ŒåŒæ­¥.</p>
</div>
<p><strong>c. IPC å…±äº«æ ¼å¼</strong></p>
<p>å›¾åƒæ•°æ®å’Œå†…å­˜å…±äº«ä¸€æ ·, æ ¼å¼ä¸º <code class="docutils literal notranslate"><span class="pre">BGRA</span> <span class="pre">BGRA</span> <span class="pre">BGRA</span></code>â€¦â€¦ä¸€å…± <code class="docutils literal notranslate"><span class="pre">width</span> <span class="pre">*</span> <span class="pre">height</span> <span class="pre">*</span> <span class="pre">4å­—èŠ‚</span></code></p>
<p><strong>d. JPEG è´¨é‡</strong></p>
<p>[Sensor]åˆ†ç»„ä¸‹è¿›è¡Œè´¨é‡é…ç½®, åœ¨ Game.ini ä¸­æ·»åŠ å¦‚ä¸‹å†…å®¹:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[Sensor]</span>
<span class="na">JpegQuality</span><span class="o">=</span><span class="s">85</span>
</pre></div>
</div>
</section>
</section>
</section>
<section id="id7">
<h2>6.2 æ¿€å…‰é›·è¾¾ä»¿çœŸ<a class="headerlink" href="#id7" title="Link to this heading">ïƒ</a></h2>
<p>TAD Sim æ¿€å…‰é›·è¾¾ä¼ æ„Ÿå™¨ä»¿çœŸå…·æœ‰ä½å»¶æ—¶ã€é«˜ä¿çœŸã€è¯­ä¹‰è¾“å‡ºçš„ç‰¹ç‚¹.</p>
<p>åŸºäºå®æ—¶å…‰çº¿è¿½è¸ª, æœ€é«˜æ”¯æŒæ¯å¸§600ä¸‡ç‚¹, å¹³å‡å¸§ç‡ä¸ä½äº 60FPS.</p>
<p>æ¿€å…‰ä»¿çœŸç»„ä»¶åŒ…å«äº†èƒ½é‡è¡°å‡æ¨¡å‹ã€é›¨é›ªé›¾å¤©æ°”æ¨¡å‹å’Œå™ªå£°æ¨¡å‹, ä½¿ç”¨å®è½¦æ•°æ®æ ‡å®šæ¨¡å‹å‚æ•°, æœ‰æ•ˆæ¨¡æ‹Ÿä¸åŒå‹å·çš„æ¿€å…‰é›·è¾¾ç‰¹æ€§, ä¿è¯äº†ä»¿çœŸç»“æœçš„çœŸå®æ€§.</p>
<p>æ”¯æŒ16çº¿, 32çº¿, 64çº¿è§„æ ¼, å¸ƒçº¿æ¨¡å‹å¯é…ç½®.</p>
<p>é‡‡ç”¨æ˜¾å¡å®æ—¶å…‰è¿½æŠ€æœ¯, é¢å¯¹å¤æ‚åœºæ™¯ä¹Ÿèƒ½å®æ—¶ä»¿çœŸ.ç›®å‰å·²æ”¯æŒå¤šç§æ¿€å…‰é›·è¾¾å‹å·çš„åŸç”Ÿæ•°æ®åŒ…æ¨¡æ‹Ÿ, æ•°æ®åŒ…é€šè¿‡ UDP åè®®ç›´æ¥å‘é€ç»™ç”¨æˆ·, æ— éœ€é¢å¤–é€‚é…æ•°æ®æ ¼å¼.</p>
<p>æ”¯æŒè¯­ä¹‰ç‚¹äº‘è¾“å‡º, å¯ç”¨äºæ ‡æ³¨æ•°æ®çš„ç”Ÿæˆ, å¸®åŠ©æ¨ç†ç®—æ³•æç¤ºè®­ç»ƒæŒ‡æ ‡.</p>
<p>TAD Sim æ”¯æŒæ¿€å…‰é›·è¾¾ä»¿çœŸ, å¹³å°æä¾›é»˜è®¤é…ç½®å‚æ•°, å¹¶æ”¯æŒå„å‚æ•°è‡ªå®šä¹‰é…ç½®åŠŸèƒ½, æ¿€å…‰é›·è¾¾ä¾èµ– Display æ¨¡å—.</p>
<div align="center"><img src="./_static/images/image229.png" alt="" width="700px"></div><br>
<p>ä¸‹æ–‡åˆ—å‡ºäº†æ¿€å…‰é›·è¾¾ä»¿çœŸé…ç½®åŠæ•°æ®è·å–è¯¦ç»†ä¿¡æ¯.</p>
<section id="id8">
<h3>6.2.1 å‚æ•°è¯´æ˜<a class="headerlink" href="#id8" title="Link to this heading">ïƒ</a></h3>
<table border="1" class="docutils">
<thead>
<tr>
<th>åç§°</th>
<th>é»˜è®¤å€¼</th>
<th>èŒƒå›´</th>
<th>å«ä¹‰</th>
</tr>
</thead>
<tbody>
<tr>
<td>ä½ç½®X(cm)</td>
<td>0</td>
<td>[-1000, 1000]</td>
<td>å®‰è£…ä½ç½®</td>
</tr>
<tr>
<td>ä½ç½®Y(cm)</td>
<td>0</td>
<td>[-1000, 1000]</td>
<td>å®‰è£…ä½ç½®</td>
</tr>
<tr>
<td>ä½ç½®Z(cm)</td>
<td>171</td>
<td>[    0, 1000]</td>
<td>å®‰è£…ä½ç½®</td>
</tr>
<tr>
<td>æ—‹è½¬X(Â°)</td>
<td>0</td>
<td>[-180,   180]</td>
<td>å®‰è£…è§’åº¦</td>
</tr>
<tr>
<td>æ—‹è½¬Y(Â°)</td>
<td>0</td>
<td>[-180,   180]</td>
<td>å®‰è£…è§’åº¦</td>
</tr>
<tr>
<td>æ—‹è½¬Z(Â°)</td>
<td>0</td>
<td>[-180,   180]</td>
<td>å®‰è£…è§’åº¦</td>
</tr>
<tr>
<td>å®ä¾‹ID</td>
<td>0</td>
<td>-</td>
<td>å½“é…ç½®äº†å¤šä¸ª Display æ—¶, åªæœ‰ Display çš„å®ä¾‹ ID ä¸€è‡´æ—¶, æ‰ä¼šè¢«å¤„ç†</td>
</tr>
<tr>
<td>å‹å·</td>
<td>RS32</td>
<td>RS32/RS16/HS40/Velodyne32/è‡ªå®šä¹‰</td>
<td></td>
</tr>
<tr>
<td>é¢‘ç‡(Hz)</td>
<td>5</td>
<td>5/10/20 "Model = User æ—¶æ­¤é¡¹å¯æ‰‹åŠ¨å¡« [1,128]"</td>
<td>æ¿€å…‰é›·è¾¾æ—‹è½¬é¢‘ç‡.å…·ä½“ç‰¹å®šå‹å·æ—¶, åªèƒ½é€‰æ‹© 5ã€10ã€20hz, User å‹å·æ—¶é¢‘ç‡å¼€æ”¾</td>
</tr>
<tr>
<td>IP</td>
<td>127.0.0.1</td>
<td></td>
<td>æ¥æ”¶è€…IP</td>
</tr>
<tr>
<td>ç«¯å£</td>
<td>2000, 2001</td>
<td>1000ï½60000</td>
<td>ç«¯å£, é€Ÿè…¾éœ€è¦2ä¸ª, ç¦¾èµ›éœ€è¦1ä¸ª</td>
</tr>
<tr>
<td>è¡°å‡æ ‡å®šå€¼</td>
<td>0</td>
<td></td>
<td>ä¸åŒå‹å·çš„æ ‡å®šå€¼ä¸ä¸€æ ·, å¡«å†™åä¼šè¦†ç›–é»˜è®¤å€¼</td>
</tr>
<tr>
<td>è§’åº¦æ ‡å®šæ•°æ®</td>
<td></td>
<td></td>
<td>è§’åº¦å®šä¹‰æ–‡ä»¶, å¡«å†™åä¼šè¦†ç›–é»˜è®¤å€¼</td>
</tr>
<tr>
<td>å¤§æ°”æ¶ˆå…‰ç³»æ•°</td>
<td>0</td>
<td>[0.0,1.0]</td>
<td>AtmosphericExtinctionCoefficient</td>
</tr>
<tr>
<td>çº¿æ•°</td>
<td>16</td>
<td>[4, 1000]</td>
<td>å‹å·ä¸ºè‡ªå®šä¹‰æ—¶</td>
</tr>
<tr>
<td>åŠå¾„èŒƒå›´(m)</td>
<td>150</td>
<td>(0, 1000]</td>
<td>å‹å·ä¸ºè‡ªå®šä¹‰æ—¶</td>
</tr>
<tr>
<td>æ°´å¹³åˆ†è¾¨ç‡(Â°)</td>
<td>1</td>
<td>(0, 360]</td>
<td>å‹å·ä¸ºè‡ªå®šä¹‰æ—¶</td>
</tr>
<tr>
<td>ä¸Šä»°è§’(Â°)</td>
<td>10</td>
<td>(0, 90]</td>
<td>å‹å·ä¸ºè‡ªå®šä¹‰æ—¶</td>
</tr>
<tr>
<td>ä¸‹ä»°è§’(Â°)</td>
<td>10</td>
<td>(0, 90]</td>
<td>å‹å·ä¸ºè‡ªå®šä¹‰æ—¶</td>
</tr>
<tr>
<td>ç»“æŸè§’åº¦(Â°)</td>
<td>360</td>
<td>(0, 360.0]</td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section id="id9">
<h3>6.2.2 æ•°æ®è·å–<a class="headerlink" href="#id9" title="Link to this heading">ïƒ</a></h3>
<section id="udp">
<h4>6.2.2.1 UDP åŒ…<a class="headerlink" href="#udp" title="Link to this heading">ïƒ</a></h4>
<p>æ¿€å…‰é›·è¾¾ä»¿çœŸæ•°æ®ä¼ è¾“é€šè¿‡ UDP ä¼ ç»™å¯è§†åŒ–è½¯ä»¶. åœ¨ä¼ æ„Ÿå™¨é…ç½®ä¸­è®¾ç½® IP å’Œç«¯å£, ç„¶åé€šè¿‡å¯è§†åŒ–è½¯ä»¶æ˜¾ç¤ºç‚¹äº‘.</p>
<p>ä»¥ RSView ä¸ºä¾‹: é¦–å…ˆæ‰“å¼€ä¼ æ„Ÿå™¨, ç‚¹å‡» <code class="docutils literal notranslate"><span class="pre">Add</span></code> æ·»åŠ é…ç½®(é¦–æ¬¡éœ€è¦), åœ¨æ–‡ä»¶ç®¡ç†å™¨ä¸­å¼¹çª—ä¸­é€‰æ‹©ç›®æ ‡åœ°å€. è®¾ç½®æˆåŠŸåå³å¯å¯¹ä¼ æ„Ÿå™¨çš„ <code class="docutils literal notranslate"><span class="pre">Type</span> <span class="pre">of</span> <span class="pre">Lidar</span></code> åŠ <code class="docutils literal notranslate"><span class="pre">Intensity</span></code> è¿›è¡Œè®¾ç½®.</p>
<div align="center"><img src="./_static/images/image230.png" alt="" width="700px"></div><br>
<div align="center"><img src="./_static/images/image231.png" alt="" width="700px"></div><br>
<p>ä¹Ÿå¯é€šè¿‡å·¥å…·æ è¿›è¡Œç«¯å£é…ç½®, å³ä¸Šè§’å·¥å…·æ  <code class="docutils literal notranslate"><span class="pre">Tool</span></code>, åœ¨ä¸‹æ‹‰æ¡†ä¸­é€‰æ‹© <code class="docutils literal notranslate"><span class="pre">Data</span> <span class="pre">Port</span> <span class="pre">Setting</span></code>, åœ¨å¼¹å‡ºçš„è®¾ç½®çª—å£ä¸­ä¿®æ”¹ç›¸åº”ä¿¡æ¯å³å¯. éœ€è¦ä¿®æ”¹ä¸ºç›®å½•ä¸‹ <code class="docutils literal notranslate"><span class="pre">cfg+æ•°å­—.ini</span></code> ç±»å‹æ–‡ä»¶ä¸­å¯¹åº”çš„ <code class="docutils literal notranslate"><span class="pre">msop_port</span></code> å’Œ <code class="docutils literal notranslate"><span class="pre">difop_port</span></code> å€¼.</p>
<div align="center"><img src="./_static/images/image232.png" alt="" width="400px"></div><br>
<div align="center"><img src="./_static/images/image233.png" alt="" width="700px"></div><br>
</section>
<section id="id10">
<h4>6.2.2.2 ç£ç›˜ä¿å­˜<a class="headerlink" href="#id10" title="Link to this heading">ïƒ</a></h4>
<p>æ¿€å…‰ä»¿çœŸåŒæ—¶æ”¯æŒç£ç›˜ä¿å­˜æ–¹å¼, ä½†ç”±äºç‚¹äº‘æ•°æ®IOå¾ˆå¤§, ä¸æ¨èæ­¤æ–¹å¼.</p>
<p>å¼€å…³è®¾ç½®æ–¹æ³•å’Œå›¾åƒç±»ä¼¼, åœ¨ Game.ini ä¸­æ·»åŠ å¦‚ä¸‹å†…å®¹:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[Sensor]</span>
<span class="na">LidarSaved</span><span class="o">=</span><span class="s">true</span>
</pre></div>
</div>
<p>é‡å¯ä»¿çœŸè½¯ä»¶, ç‚¹äº‘æ•°æ®å³ä¿å­˜äº:</p>
<ul class="simple">
<li><p>Windows ä¸‹:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">C:\Users\ç”¨æˆ·å\AppData\Roaming\tadsim\service_data\display\Saved\SensorData</span></code></p></li>
</ul>
</li>
<li><p>Ubuntu ä¸‹:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">/home/.config/tadsim/Display/Saved/SensorData</span></code></p></li>
</ul>
</li>
</ul>
</section>
<section id="id11">
<h4>6.2.2.3 PB æ¶ˆæ¯<a class="headerlink" href="#id11" title="Link to this heading">ïƒ</a></h4>
<p>é¦–å…ˆéœ€è¦æ‰“å¼€ Display çš„ PB å¹¿æ’­åŠŸèƒ½, åœ¨ Game.ini ä¸­æ·»åŠ å¦‚ä¸‹å†…å®¹:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[Sensor]</span>
<span class="na">PublicMsg</span><span class="o">=</span><span class="s">true</span>
</pre></div>
</div>
<p>ç„¶åé€šè¿‡è®¢é˜…ç³»ç»Ÿçš„æ¶ˆæ¯, æ¥è·å–ä¼ æ„Ÿå™¨æ•°æ®. TOPIC ä¸º <code class="docutils literal notranslate"><span class="pre">DISPLAYSENSOR_{id}</span></code>,  id æ˜¯ç®—æ³• id, é€šè¿‡ Display æ¨¡å—çš„è¿è¡Œå‚æ•° -topicid æŒ‡å®š, é»˜è®¤ä¸º 0.</p>
<p><strong>SensorPose è¯¦ç»†å®šä¹‰:</strong></p>
<table border="1" class="docutils">
<thead>
<tr>
<th>å­—æ®µ</th>
<th>ç±»å‹</th>
<th>å•ä½</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>longitude</td>
<td>double</td>
<td>deg</td>
<td>ç»åº¦</td>
</tr>
<tr>
<td>latitude</td>
<td>double</td>
<td>deg</td>
<td>çº¬åº¦</td>
</tr>
<tr>
<td>altitude</td>
<td>double</td>
<td>m</td>
<td>é«˜ç¨‹</td>
</tr>
<tr>
<td>roll</td>
<td>float</td>
<td>rad</td>
<td>æ»šè§’</td>
</tr>
<tr>
<td>pitch</td>
<td>float</td>
<td>rad</td>
<td>ä¿¯ä»°è§’</td>
</tr>
<tr>
<td>yaw</td>
<td>float</td>
<td>rad</td>
<td>èˆªå‘è§’</td>
</tr>
</tbody>
</table>
<p><strong>LidarRaw è¯¦ç»†å®šä¹‰:</strong></p>
<table border="1" class="docutils">
<thead>
<tr>
<th>å­—æ®µ</th>
<th>ç±»å‹</th>
<th>å•ä½</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>Point.x</td>
<td>float</td>
<td>m</td>
<td>å•å¸§å±€éƒ¨åæ ‡x</td>
</tr>
<tr>
<td>Point.y</td>
<td>float</td>
<td>m</td>
<td>å•å¸§å±€éƒ¨åæ ‡y</td>
</tr>
<tr>
<td>Point.z</td>
<td>float</td>
<td>m</td>
<td>å•å¸§å±€éƒ¨åæ ‡z</td>
</tr>
<tr>
<td>Point.i</td>
<td>float</td>
<td></td>
<td>åå°„ç‡</td>
</tr>
<tr>
<td>Point.t</td>
<td>uint</td>
<td></td>
<td>ç±»å‹,ç‚¹äº‘æ ‡ç­¾å€¼</td>
</tr>
<tr>
<td>id</td>
<td>int32</td>
<td></td>
<td>ä¼ æ„Ÿå™¨ID</td>
</tr>
<tr>
<td>timestamp_begin</td>
<td>double</td>
<td>ms</td>
<td>å¼€å§‹æ—¶é—´æˆ³</td>
</tr>
<tr>
<td>timestamp_end</td>
<td>double</td>
<td>ms</td>
<td>ç»“æŸæ—¶é—´æˆ³</td>
</tr>
<tr>
<td>points</td>
<td>repeated Point</td>
<td></td>
<td>ç‚¹äº‘,(repeatåºåˆ—åŒ–å¾ˆæ…¢, åŸºæœ¬ä¸ç”¨)</td>
</tr>
<tr>
<td>point_lists</td>
<td>bytes</td>
<td></td>
<td>ç‚¹äº‘çš„äºŒè¿›åˆ¶å½¢å¼,(é€Ÿåº¦å¿«, æŒ‰ç…§floatæ•°ç»„å­˜å‚¨, ä¸€ä¸ªç‚¹æŒ‰ç…§Pointé‡Œå­—æ®µçš„é¡ºåºå ç”¨5ä¸ªfloat, åå°„ç‡ä¹Ÿæ˜¯float)</td>
</tr>
<tr>
<td>count</td>
<td>uint</td>
<td></td>
<td>ç‚¹æ•°</td>
</tr>
<tr>
<td>pose_first</td>
<td>SensorPose</td>
<td></td>
<td>åˆå§‹pose</td>
</tr>
<tr>
<td>pose_last</td>
<td>SensorPose</td>
<td></td>
<td>æœ€åpose</td>
</tr>
<tr>
<td>coord_type</td>
<td>CoordTypeæšä¸¾</td>
<td></td>
<td>COORD_SENSOR =0;COORD_VEHICLE = 1;COORD_ENU = 2;</td>
</tr>
</tbody>
</table>
<p>ä»£ç å‚è€ƒå›¾åƒç¤ºä¾‹ (9.1.2.3 ç« èŠ‚).</p>
</section>
<section id="id12">
<h4>6.2.2.4 å…¶ä»–è®¾ç½®<a class="headerlink" href="#id12" title="Link to this heading">ïƒ</a></h4>
<p>Game.ini ä¸­è¿˜æœ‰å…¶ä»–å’Œ lidar ç›¸å…³çš„è®¾ç½®:</p>
<ul class="simple">
<li><p><strong>LidarCoordType=[None,vehicle,enu]</strong></p>
<ul>
<li><p>è®¾ç½®ç‚¹äº‘åæ ‡ç³».</p></li>
<li><p>None è¡¨ç¤ºä¼ æ„Ÿå™¨åæ ‡ç³», vehicle è¡¨ç¤ºè½¦è¾†åæ ‡ç³», enu è¡¨ç¤ºä¸–ç•Œåæ ‡ç³»</p></li>
</ul>
</li>
<li><p><strong>LidarMethod=[raytracing,depth,raycast]</strong></p>
<ul>
<li><p>è®¾ç½® lidar çš„æ‰«ææ–¹å¼,</p></li>
<li><p>é»˜è®¤æƒ…å†µä¸‹ linux å¹³å°ä¸º depth, ç”¨å›¾åƒæ·±åº¦æ¨¡æ‹Ÿå…‰çº¿;</p></li>
<li><p>Windows å¹³å°å¦‚æœç¾æœ¯åœºæ™¯æ‰“å¼€äº†å…‰çº¿è¿½è¸ª, åˆ™é»˜è®¤æ”¯æŒ raytracing;</p></li>
<li><p>raycast ä¸º cpu æ‰«ææ–¹å¼, é€Ÿåº¦è¾ƒæ…¢.</p></li>
</ul>
</li>
<li><p><strong>LidarDualReturn=[true,false]</strong></p>
<ul>
<li><p>è®¾ç½®æ¿€å…‰é›·è¾¾æ˜¯å¦ä¸ºåŒåå°„, é»˜è®¤å…³é—­</p></li>
</ul>
</li>
<li><p><strong>LidarFrameAlign=[true,false]</strong></p>
<ul>
<li><p>è®¾ç½®æ¿€å…‰è¿åŠ¨è¡¥å¿.</p></li>
<li><p>é»˜è®¤å…³é—­, å½“è½¦è¾†è¿åŠ¨æ—¶, åœ¨ 360 æ—‹è½¬å‹å·ä¸Š, ä¸€å¸§ç‚¹äº‘ä¼šå‡ºç°ä¸å¯¹é½çš„ç°è±¡, å¦‚æœè®¾ç½® true, åˆ™å¼ºåˆ¶è¿åŠ¨è¡¥å¿.</p></li>
</ul>
</li>
</ul>
</section>
</section>
</section>
<section id="id13">
<h2>6.3 æ¯«ç±³æ³¢é›·è¾¾ä»¿çœŸ<a class="headerlink" href="#id13" title="Link to this heading">ïƒ</a></h2>
<p>TAD Sim æ”¯æŒæ¯«ç±³æ³¢é›·è¾¾ä»¿çœŸ, åŸºäºçœŸå®æ¯«ç±³æ³¢é›·è¾¾æ¨¡å‹ä»¿çœŸ, å¹³å°æä¾›é»˜è®¤é…ç½®å‚æ•°, å¹¶æ”¯æŒå„å‚æ•°è‡ªå®šä¹‰é…ç½®åŠŸèƒ½, æ¯«ç±³æ³¢é›·è¾¾ä¾èµ– Radar æ¨¡å—.</p>
<div align="center"><img src="./_static/images/image234.png" alt="" width="700px"></div><br>
<section id="id14">
<h3>6.3.1 å‚æ•°è¯´æ˜<a class="headerlink" href="#id14" title="Link to this heading">ïƒ</a></h3>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>åç§°</p></th>
<th class="head"><p>é»˜è®¤å€¼</p></th>
<th class="head"><p>èŒƒå›´</p></th>
<th class="head"><p>å«ä¹‰</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>ä½ç½®X(cm)</p></td>
<td><p>0</p></td>
<td><p>[-1000, 1000]</p></td>
<td><p>å®‰è£…ä½ç½®</p></td>
</tr>
<tr class="row-odd"><td><p>ä½ç½®Y(cm)</p></td>
<td><p>0</p></td>
<td><p>[-1000, 1000]</p></td>
<td><p>å®‰è£…ä½ç½®</p></td>
</tr>
<tr class="row-even"><td><p>ä½ç½®Z(cm)</p></td>
<td><p>171</p></td>
<td><p>[0, 1000]</p></td>
<td><p>å®‰è£…ä½ç½®</p></td>
</tr>
<tr class="row-odd"><td><p>æ—‹è½¬X(Â°)</p></td>
<td><p>0</p></td>
<td><p>[-180, 180]</p></td>
<td><p>å®‰è£…è§’åº¦</p></td>
</tr>
<tr class="row-even"><td><p>æ—‹è½¬Y(Â°)</p></td>
<td><p>0</p></td>
<td><p>[-180, 180]</p></td>
<td><p>å®‰è£…è§’åº¦</p></td>
</tr>
<tr class="row-odd"><td><p>æ—‹è½¬Z(Â°)</p></td>
<td><p>0</p></td>
<td><p>[-180, 180]</p></td>
<td><p>å®‰è£…è§’åº¦</p></td>
</tr>
<tr class="row-even"><td><p>å®ä¾‹ID</p></td>
<td><p>0</p></td>
<td><p>-</p></td>
<td><p>å½“é…ç½®äº†å¤šä¸ª Display æ—¶, åªæœ‰ Display çš„å®ä¾‹ ID ä¸€è‡´æ—¶, æ‰ä¼šè¢«å¤„ç†</p></td>
</tr>
<tr class="row-odd"><td><p>é¢‘ç‡(Hz)</p></td>
<td><p>10</p></td>
<td><p>(0, 200]</p></td>
<td><p>ä¼ æ„Ÿå™¨é¢‘ç‡</p></td>
</tr>
<tr class="row-even"><td><p>é›·è¾¾è½½é¢‘</p></td>
<td><p>77</p></td>
<td><p>77/24</p></td>
<td><p>é›·è¾¾æ³¢å½¢çš„ä¸­å¿ƒé¢‘ç‡, å½±å“é›·è¾¾æœ€å¤§æ¢æµ‹è·ç¦»ã€è·ç¦»åˆ†è¾¨ç‡ã€é€Ÿåº¦åˆ†è¾¨ç‡ã€æµ‹è·ç²¾åº¦ã€æµ‹é€Ÿç²¾åº¦ã€æµ‹è§’ç²¾åº¦</p></td>
</tr>
<tr class="row-odd"><td><p>å‘å°„åŠŸç‡(dBm)</p></td>
<td><p>10</p></td>
<td><p>[5, 10]</p></td>
<td><p>é›·è¾¾å‘å°„ä¿¡å·çš„åŠŸç‡å€¼, å‘å°„åŠŸç‡è¶Šå¤§, é›·è¾¾å¨åŠ›è¶Šå¤§, æœ€å¤§æ¢æµ‹è·ç¦»è¶Šå¤§.å½±å“é›·è¾¾æœ€å¤§æ¢æµ‹è·ç¦»ã€æµ‹è·ç²¾åº¦ã€æµ‹é€Ÿç²¾åº¦ã€æµ‹è§’ç²¾åº¦</p></td>
</tr>
<tr class="row-even"><td><p>å‘å°„å¤©çº¿å¢ç›Š(dBi)</p></td>
<td><p>15</p></td>
<td><p>[10, 15]</p></td>
<td><p>æœ€å¤§æ¢æµ‹è·ç¦»éšå‘å°„å¤©çº¿å¢ç›Šçš„å¢å¤§è€Œå¢å¤§.å½±å“é›·è¾¾æœ€å¤§æ¢æµ‹è·ç¦»ã€æµ‹è·ç²¾åº¦ã€æµ‹é€Ÿç²¾åº¦ã€æµ‹è§’ç²¾åº¦</p></td>
</tr>
<tr class="row-odd"><td><p>æ¥æ”¶å¤©çº¿å¢ç›Š(dBi)</p></td>
<td><p>15</p></td>
<td><p>[10, 15]</p></td>
<td><p>æœ€å¤§æ¢æµ‹è·ç¦»éšæ¥æ”¶å¤©çº¿å¢ç›Šçš„å¢å¤§è€Œå¢å¤§.å½±å“é›·è¾¾æœ€å¤§æ¢æµ‹è·ç¦»ã€æµ‹è·ç²¾åº¦ã€æµ‹é€Ÿç²¾åº¦ã€æµ‹è§’ç²¾åº¦</p></td>
</tr>
<tr class="row-even"><td><p>ç­‰æ•ˆå™ªå£°æ¸©åº¦(K)</p></td>
<td><p>300</p></td>
<td><p>[290, 310]</p></td>
<td><p>é›·è¾¾æ‰€å¤„ç¯å¢ƒçš„ç­‰æ•ˆå™ªå£°æ¸©åº¦, æœ€å¤§æ¢æµ‹è·ç¦»éšæ­è®¾å¤©çº¿å¢ç›Šçš„å¢å¤§è€Œå‡å°.å½±å“é›·è¾¾æœ€å¤§æ¢æµ‹è·ç¦»ã€æµ‹è·ç²¾åº¦ã€æµ‹é€Ÿç²¾åº¦ã€æµ‹è§’ç²¾åº¦</p></td>
</tr>
<tr class="row-odd"><td><p>æ¥æ”¶æœºå™ªå£°ç³»æ•°(dB)</p></td>
<td><p>12</p></td>
<td><p>[0, 45]</p></td>
<td><p>å½±å“é›·è¾¾æœ€å¤§æ¢æµ‹è·ç¦»ã€æµ‹è·ç²¾åº¦ã€æµ‹é€Ÿç²¾åº¦ã€æµ‹è§’ç²¾åº¦</p></td>
</tr>
<tr class="row-even"><td><p>ç³»ç»Ÿè¡°å‡å¸¸æ•°(dB)</p></td>
<td><p>10</p></td>
<td><p>è”åŠ¨F0_GHz(77: [5, 10], 24: [15, 30])</p></td>
<td><p>77/79/24GHzçš„é›·è¾¾ç³»ç»Ÿè¡°å‡å¸¸æ•°èŒƒå›´ä¸åŒ, éœ€æ³¨æ„, å½±å“é›·è¾¾æœ€å¤§æ¢æµ‹è·ç¦»</p></td>
</tr>
<tr class="row-odd"><td><p>æœ€å°å¯æ£€æµ‹ä¿¡å™ªæ¯”(dB)</p></td>
<td><p>18</p></td>
<td><p>[15, 22]</p></td>
<td><p>å½±å“ç›®æ ‡æ˜¯å¦å¯è¢«æ£€æµ‹åˆ°çš„å‚æ•°, åŒæ—¶å½±å“æœ€å¤§æ¢æµ‹è·ç¦».åœ¨å…¶ä»–å‚æ•°ä¸€å®šçš„æƒ…å†µä¸‹, æœ€å¤§æ¢æµ‹è·ç¦»éšæœ€å°å¯æ£€æµ‹ä¿¡å™ªæ¯”çš„å¢å¤§è€Œå‡å°.å½±å“é›·è¾¾æœ€å¤§æ¢æµ‹è·ç¦»ã€æµ‹è·ç²¾åº¦ã€æµ‹é€Ÿç²¾åº¦ã€æµ‹è§’ç²¾åº¦</p></td>
</tr>
<tr class="row-even"><td><p>ç›®æ ‡å»¶è¿Ÿå‚æ•°(ms)</p></td>
<td><p>0</p></td>
<td><p>[0, 5000]</p></td>
<td><p></p></td>
</tr>
<tr class="row-odd"><td><p>å‚ç›´fov(Â°)</p></td>
<td><p>10</p></td>
<td><p>[0, 160]</p></td>
<td><p></p></td>
</tr>
<tr class="row-even"><td><p>æ°´å¹³fov(Â°)</p></td>
<td><p>0</p></td>
<td><p>[0, 160]</p></td>
<td><p>é›·è¾¾å¤©çº¿æ°´å¹³æ¢æµ‹èŒƒå›´, è¯·æ³¨æ„å‡è®¾è®¾ç½®ä¸º10, åˆ™ä»£è¡¨æ¢æµ‹èŒƒå›´ä¸º[-5, 5]</p></td>
</tr>
<tr class="row-odd"><td><p>æ°´å¹³è§’åº¦åˆ†è¾¨ç‡(Â°)</p></td>
<td><p>3</p></td>
<td><p>[1, 10]</p></td>
<td><p>é›·è¾¾å¤©çº¿æ°´å¹³è§’åˆ†è¾¨ç‡, å³æ°´å¹³å¤©çº¿3dBæ³¢æŸå®½åº¦, ä»¥1Â°ä¸ºæ­¥è¿›è¾“å…¥</p></td>
</tr>
<tr class="row-even"><td><p>å‚ç›´è§’åº¦åˆ†è¾¨ç‡(Â°)</p></td>
<td><p>3</p></td>
<td><p>[1, 10]</p></td>
<td><p>é›·è¾¾å¤©çº¿å‚ç›´è§’åˆ†è¾¨ç‡, å³æ°´å¹³å¤©çº¿3dBæ³¢æŸå®½åº¦, ä»¥1Â°ä¸ºæ­¥è¿›è¾“å…¥</p></td>
</tr>
<tr class="row-odd"><td><p>æ•…éšœæ•°æ®</p></td>
<td><p></p></td>
<td><p></p></td>
<td><p>æ•…éšœæ³¨å…¥æ–‡ä»¶, åŒ…å«ç±»å‹, å…³é”®å¸§, æ•…éšœå€¼</p></td>
</tr>
</tbody>
</table>
</section>
<section id="id15">
<h3>6.3.2 æ•°æ®è·å–<a class="headerlink" href="#id15" title="Link to this heading">ïƒ</a></h3>
<section id="id16">
<h4>6.3.2.1 PBæ¶ˆæ¯<a class="headerlink" href="#id16" title="Link to this heading">ïƒ</a></h4>
<p>é‡‡ç”¨ OSI æ ‡å‡†æ ¼å¼å®šä¹‰, æ•°æ®ä¿å­˜åœ¨ radar_sensor ä¸­, æ ¼å¼å®šä¹‰è¯·å‚è€ƒ:</p>
<p><a class="reference external" href="https://opensimulationinterface.github.io/open-simulation-interface/structosi3_1_1FeatureData.html">open_simulation_interface: osi3::FeatureData Struct Reference</a></p>
</section>
<section id="id17">
<h4>6.3.2.2 ç£ç›˜ä¿å­˜<a class="headerlink" href="#id17" title="Link to this heading">ïƒ</a></h4>
<p>å¦‚æœæ¨¡å—ä¸­çš„åˆå§‹åŒ–å‚æ•°æŒ‡å®šäº† DebugDir=xxx è·¯å¾„, åˆ™ä¼šåœ¨è®¾ç½®çš„è·¯å¾„ç›®å½•ä¸­ä¿å­˜æ¯ä¸€å¸§çš„OSIæ¶ˆæ¯, ä¿å­˜ä¸º JSON æ ¼å¼.</p>
</section>
</section>
</section>
<section id="id18">
<h2>6.4 è¶…å£°æ³¢é›·è¾¾ä»¿çœŸ<a class="headerlink" href="#id18" title="Link to this heading">ïƒ</a></h2>
<p>TAD Sim æ”¯æŒè¶…å£°æ³¢é›·è¾¾ä»¿çœŸ, å¹³å°æä¾›é»˜è®¤é…ç½®å‚æ•°, å¹¶æ”¯æŒå„å‚æ•°è‡ªå®šä¹‰é…ç½®åŠŸèƒ½, è¶…å£°æ³¢é›·è¾¾ä¾èµ– Display æ¨¡å—.</p>
<div align="center"><img src="./_static/images/image235.png" alt="" width="700px"></div><br>
<section id="id19">
<h3>6.4.1 å‚æ•°è¯´æ˜<a class="headerlink" href="#id19" title="Link to this heading">ïƒ</a></h3>
<table border="1" class="docutils">
<thead>
<tr>
<th>åç§°</th>
<th>è‹±æ–‡</th>
<th>é»˜è®¤å€¼</th>
<th>èŒƒå›´</th>
<th>å«ä¹‰</th>
</tr>
</thead>
<tbody>
<tr>
<td>ä½ç½®X(cm)</td>
<td></td>
<td>-37</td>
<td>[-1000, 1000]</td>
<td>å®‰è£…ä½ç½®</td>
</tr>
<tr>
<td>ä½ç½®Y(cm)</td>
<td></td>
<td>25</td>
<td>[-1000, 1000]</td>
<td>å®‰è£…ä½ç½®</td>
</tr>
<tr>
<td>ä½ç½®Z(cm)</td>
<td></td>
<td>171</td>
<td>[0, 1000]</td>
<td>å®‰è£…ä½ç½®</td>
</tr>
<tr>
<td>æ—‹è½¬X(Â°)</td>
<td></td>
<td>0</td>
<td>[-180, 180]</td>
<td>å®‰è£…è§’åº¦</td>
</tr>
<tr>
<td>æ—‹è½¬Y(Â°)</td>
<td></td>
<td>0</td>
<td>[-180, 180]</td>
<td>å®‰è£…è§’åº¦</td>
</tr>
<tr>
<td>æ—‹è½¬Z(Â°)</td>
<td></td>
<td>0</td>
<td>[-180, 180]</td>
<td>å®‰è£…è§’åº¦</td>
</tr>
<tr>
<td>å®ä¾‹ID</td>
<td></td>
<td>0</td>
<td>-</td>
<td>å½“é…ç½®äº†å¤šä¸ª display æ—¶, åªæœ‰Displayçš„å®ä¾‹IDä¸€è‡´æ—¶, æ‰ä¼šè¢«å¤„ç†</td>
</tr>
<tr>
<td>é¢‘ç‡(Hz)</td>
<td>Frequency</td>
<td>40000</td>
<td>[4, 250K]</td>
<td>å£°æ³¢é¢‘ç‡</td>
</tr>
<tr>
<td>å‚ç›´fov(Â°)</td>
<td>FovVertical</td>
<td>30</td>
<td>[0.0,160.0]</td>
<td>é›·è¾¾å¤©çº¿å‚ç›´æ¢æµ‹èŒƒå›´, è¯·æ³¨æ„å‡è®¾è®¾ç½®ä¸º10, åˆ™ä»£è¡¨æ¢æµ‹èŒƒå›´ä¸º[-5,5]</td>
</tr>
<tr>
<td>æ°´å¹³fov(Â°)</td>
<td>FovHorizontal</td>
<td>60</td>
<td>[0.0,160.0]</td>
<td>é›·è¾¾å¤©çº¿æ°´å¹³æ¢æµ‹èŒƒå›´, è¯·æ³¨æ„å‡è®¾è®¾ç½®ä¸º10, åˆ™ä»£è¡¨æ¢æµ‹èŒƒå›´ä¸º[-5,5]</td>
</tr>
<tr>
<td>æœ‰æ•ˆåˆ†è´(dB)</td>
<td>dBmin</td>
<td>-6</td>
<td>[-1000.0,0.0]</td>
<td>èƒ½é‡åˆ†è´</td>
</tr>
<tr>
<td>å‘å£°åŠå¾„(m)</td>
<td>Radius</td>
<td>0.01</td>
<td>[0.001,0.3]</td>
<td>å‘å£°åŠå¾„</td>
</tr>
<tr>
<td>å™ªå£°ç³»æ•°</td>
<td>NoiseFactor</td>
<td>5</td>
<td>[0.2, 10.0]</td>
<td>ç»¼åˆå™ªå£°ç³»æ•°</td>
</tr>
<tr>
<td>å™ªå£°æ–¹å·®</td>
<td>NoiseStd</td>
<td>5</td>
<td>[0.1, 10.0]</td>
<td>é«˜æ–¯å™ªå£°æ–¹å·®</td>
</tr>
<tr>
<td>é™„ç€ç‰©ç±»å‹</td>
<td>AttachmentType</td>
<td>Water</td>
<td>Mud</td>
<td>å¤–éƒ¨é™„ç€ç‰©ç±»å‹, ä¼šå½±å“æ¢æµ‹è·ç¦»</td>
</tr>
<tr>
<td>æ¢æµ‹è·ç¦»(m)</td>
<td>Distance</td>
<td>5</td>
<td>[0.001,100.0]</td>
<td>æœ€å¤§çš„æ¢æµ‹è·ç¦»</td>
</tr>
<tr>
<td>é—´æ¥è·ç¦»</td>
<td>IndirectDistance</td>
<td>false</td>
<td></td>
<td>æ˜¯å¦æ‰“å¼€é—´æ¥è·ç¦»</td>
</tr>
<tr>
<td>è„‰å†²æ—¶åˆ»(æ¯«ç§’)</td>
<td>PulseMoment</td>
<td>0</td>
<td>[0.0, 100.0]</td>
<td>å‘å£°è„‰å†²çš„èµ·å§‹æ—¶åˆ»</td>
</tr>
<tr>
<td>è„‰å†²å‘¨æœŸ(æ¯«ç§’)</td>
<td>PulsePeriod</td>
<td>100</td>
<td>[0.1, 100.0]</td>
<td>å‘å£°è„‰å†²çš„å‘¨æœŸ</td>
</tr>
<tr>
<td>è½®è¯¢</td>
<td>PollTurn</td>
<td>ç©º</td>
<td>"01SR" 4ä¸ªå­—ç¬¦ä»»æ„ç»„åˆ</td>
<td>è„‰å†²å‘å£°æ—¶çš„å·¥ä½œæ–¹å¼</td>
</tr>
</tbody>
</table>
</section>
<section id="id20">
<h3>6.4.2 æ•°æ®è·å–<a class="headerlink" href="#id20" title="Link to this heading">ïƒ</a></h3>
<section id="id21">
<h4>6.4.2.1 ç£ç›˜ä¿å­˜<a class="headerlink" href="#id21" title="Link to this heading">ïƒ</a></h4>
<p>å¼€å…³è®¾ç½®æ–¹æ³•å’Œå›¾åƒç±»ä¼¼, åœ¨ Game.ini ä¸­æ·»åŠ å¦‚ä¸‹å†…å®¹:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[Sensor]</span>
<span class="na">UltrasonicSaved</span><span class="o">=</span><span class="s">true</span>
</pre></div>
</div>
<p>é‡å¯ä»¿çœŸè½¯ä»¶, ç‚¹äº‘æ•°æ®å³ä¿å­˜äº:</p>
<ul class="simple">
<li><p>Windows ä¸‹:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">C:\Users\ç”¨æˆ·å\AppData\Roaming\tadsim\service_data\display\Saved\SensorData</span></code></p></li>
</ul>
</li>
<li><p>Ubuntu ä¸‹:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">/home/.config/tadsim/Display/Saved/SensorData</span></code></p></li>
</ul>
</li>
</ul>
</section>
<section id="id22">
<h4>6.4.2.2 PB æ¶ˆæ¯<a class="headerlink" href="#id22" title="Link to this heading">ïƒ</a></h4>
<p>é¦–å…ˆéœ€è¦æ‰“å¼€ Display çš„ PB å¹¿æ’­åŠŸèƒ½, åœ¨ Game.ini ä¸­æ·»åŠ å¦‚ä¸‹å†…å®¹:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[Sensor]</span>
<span class="na">PublicMsg</span><span class="o">=</span><span class="s">true</span>
</pre></div>
</div>
<p>ç„¶åé€šè¿‡è®¢é˜…ç³»ç»Ÿçš„æ¶ˆæ¯, æ¥è·å–ä¼ æ„Ÿå™¨æ•°æ® .TOPIC ä¸º DISPLAYSENSOR_{id},  id æ˜¯ç®—æ³• id, é€šè¿‡ Display æ¨¡å—çš„è¿è¡Œå‚æ•° -topicid æŒ‡å®š, é»˜è®¤ä¸º 0.</p>
<p>å‚è€ƒå›¾åƒç¤ºä¾‹ä»£ç , ä» PB ä¸­è·å–åˆ°è¶…å£°æ³¢çš„äºŒè¿›åˆ¶ raw æ•°æ®, ç„¶åå†å¯¹ raw æ•°æ®è¿›è¡Œååºåˆ—åŒ–.å…·ä½“çš„ proto å®šä¹‰æ ¼å¼é‡‡ç”¨ OSI æ ‡å‡†æ ¼å¼å®šä¹‰, æ ¼å¼å®šä¹‰è¯·å‚è€ƒ:</p>
<p><a class="reference external" href="https://opensimulationinterface.github.io/open-simulation-interface/structosi3_1_1UltrasonicDetectionData.html">open_simulation_interface: osi3::UltrasonicDetectionData Struct Reference</a></p>
<table border="1" class="docutils">
<thead>
<tr>
<th>å˜é‡</th>
<th>ç±»å‹</th>
<th>å«ä¹‰</th>
</tr>
</thead>
<tbody>
<tr>
<td>ultrasonic_sensor</td>
<td>UltrasonicDetectionData</td>
<td>æ¯ä¸ªä¼ æ„Ÿå™¨å¯¹åº”ä¸€ä¸ªultrasonic_sensor</td>
</tr>
<tr>
<td>header.measurement_time</td>
<td>Timestamp</td>
<td>radaræ—¶é—´æˆ³</td>
</tr>
<tr>
<td>detection</td>
<td>UltrasonicDetection</td>
<td>ä»¿çœŸæ•°æ®</td>
</tr>
<tr>
<td>detection[i].distance</td>
<td>double</td>
<td>è·ç¦»</td>
</tr>
</tbody>
</table>
<p>detection çš„ size, ç›´æ¥è·ç¦»æ—¶ä¸º 1, é—´æ¥è·ç¦»ä¸º 2.</p>
</section>
</section>
<section id="id23">
<h3>6.4.3 è½®è¯¢æ¨¡å¼<a class="headerlink" href="#id23" title="Link to this heading">ïƒ</a></h3>
<ul class="simple">
<li><p>è½®è¯¢æ¨¡å¼ä¸‹, åŸæœ‰çš„é—´æ¥è·ç¦»å¤±æ•ˆå…³é—­</p></li>
<li><p>å‚ä¸è½®è¯¢çš„è¶…å£°æ³¢, å°†æŒ‰ç…§ç›¸åŒé¢‘ç‡, ç›¸åŒèŠ‚æ‹è®¡ç®—.</p></li>
</ul>
<table border="1" class="docutils">
<thead>
<tr>
<th>å­—ç¬¦</th>
<th>å«ä¹‰</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>å…³é—­</td>
</tr>
<tr>
<td>1</td>
<td>æ­£å¸¸å·¥ä½œ, èƒ½å‘èƒ½æ”¶</td>
</tr>
<tr>
<td>s</td>
<td>sendåªå‘å£°</td>
</tr>
<tr>
<td>r</td>
<td>receiveåªæ¥æ”¶</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="id24">
<h2>6.5 çœŸå€¼ä¼ æ„Ÿå™¨ä»¿çœŸ<a class="headerlink" href="#id24" title="Link to this heading">ïƒ</a></h2>
<p>TAD Sim æ”¯æŒçœŸå€¼ä¼ æ„Ÿå™¨ä»¿çœŸ, å¹³å°æä¾›é»˜è®¤é…ç½®å‚æ•°, å¹¶æ”¯æŒå„å‚æ•°è‡ªå®šä¹‰é…ç½®åŠŸèƒ½, çœŸå€¼ä¼ æ„Ÿå™¨ä¾èµ– SensorTruth æ¨¡å—.</p>
<div align="center"><img src="./_static/images/image236.png" alt="" width="700px"></div><br>
<p>ä¸‹æ–‡åˆ—å‡ºäº†çœŸå€¼ä¼ æ„Ÿå™¨ä»¿çœŸé…ç½®åŠæ•°æ®è·å–è¯¦ç»†ä¿¡æ¯.</p>
<section id="id25">
<h3>6.5.1 å‚æ•°è¯´æ˜<a class="headerlink" href="#id25" title="Link to this heading">ïƒ</a></h3>
<table border="1" class="docutils">
<thead>
<tr>
<th>åç§°</th>
<th>é»˜è®¤å€¼</th>
<th>èŒƒå›´</th>
<th>å«ä¹‰</th>
</tr>
</thead>
<tbody>
<tr>
<td>ä½ç½®X(cm)</td>
<td>0</td>
<td>[-1000, 1000]</td>
<td>å®‰è£…ä½ç½®</td>
</tr>
<tr>
<td>ä½ç½®Y(cm)</td>
<td>0</td>
<td>[-1000, 1000]</td>
<td>å®‰è£…ä½ç½®</td>
</tr>
<tr>
<td>ä½ç½®Z(cm)</td>
<td>171</td>
<td>[0, 1000]</td>
<td>å®‰è£…ä½ç½®</td>
</tr>
<tr>
<td>æ—‹è½¬X(Â°)</td>
<td>0</td>
<td>[-180, 180]</td>
<td>å®‰è£…è§’åº¦</td>
</tr>
<tr>
<td>æ—‹è½¬Y(Â°)</td>
<td>0</td>
<td>[-180, 180]</td>
<td>å®‰è£…è§’åº¦</td>
</tr>
<tr>
<td>æ—‹è½¬Z(Â°)</td>
<td>0</td>
<td>[-180, 180]</td>
<td>å®‰è£…è§’åº¦</td>
</tr>
<tr>
<td>å®ä¾‹ID</td>
<td>0</td>
<td>-</td>
<td>å½“é…ç½®äº†å¤šä¸ªSensorTruthæ—¶, åªæœ‰å®ä¾‹IDä¸€è‡´æ—¶, æ‰ä¼šè¢«å¤„ç†</td>
</tr>
<tr>
<td>å‚ç›´fov(Â°)</td>
<td>10</td>
<td>[0, 160]</td>
<td>é›·è¾¾å¤©çº¿æ°´å¹³è¿‡æ»¤èŒƒå›´, è¯·æ³¨æ„å‡è®¾è®¾ç½®ä¸º10, åˆ™ä»£è¡¨æ¢æµ‹èŒƒå›´ä¸º[-5,5]</td>
</tr>
<tr>
<td>æ°´å¹³fov(Â°)</td>
<td>20</td>
<td>[0, 160]</td>
<td>é›·è¾¾å¤©çº¿æ°´å¹³è¿‡æ»¤èŒƒå›´, è¯·æ³¨æ„å‡è®¾è®¾ç½®ä¸º10, åˆ™ä»£è¡¨æ¢æµ‹èŒƒå›´ä¸º[-5,5]</td>
</tr>
<tr>
<td>æ¢æµ‹è·ç¦»(m)</td>
<td>200</td>
<td>(0, 1000]</td>
<td>è¿‡æ»¤åŠå¾„</td>
</tr>
</tbody>
</table>
</section>
<section id="id26">
<h3>6.5.2 æ•°æ®è·å–<a class="headerlink" href="#id26" title="Link to this heading">ïƒ</a></h3>
<p>æ‰“å¼€ SensotTruth æ¨¡å—, æ¨¡å—å°†å¹¿æ’­è¿‡æ»¤åçš„ traffic æ¶ˆæ¯ .Topic: <code class="docutils literal notranslate"><span class="pre">TXSIM_SENSOR_OBJECT</span></code>, ä¾èµ–cameraã€lidarã€ultrasonic ä¼ æ„Ÿå™¨, å¦‚æœæŒ‡å®šäº† -device, topic ä¸º <code class="docutils literal notranslate"><span class="pre">TXSIM_SENSOR_OBJECT_{id}</span></code>.
è¯¦ç»†ä¿¡æ¯è§ <a class="reference internal" href="403.%E4%BB%BF%E7%9C%9F%E6%B6%88%E6%81%AF%E8%AF%B4%E6%98%8E.html#id1"><span class="std std-ref">403.ä»¿çœŸæ¶ˆæ¯è¯´æ˜</span></a> çš„å®šä¹‰.</p>
</section>
</section>
<section id="imu">
<h2>6.6 IMU ä»¿çœŸ<a class="headerlink" href="#imu" title="Link to this heading">ïƒ</a></h2>
<p>TAD Sim æ”¯æŒ IMU ä»¿çœŸ, å¹³å°æä¾›é»˜è®¤é…ç½®å‚æ•°, å¹¶æ”¯æŒå„å‚æ•°è‡ªå®šä¹‰é…ç½®åŠŸèƒ½.</p>
<div align="center"><img src="./_static/images/image237.png" alt="" width="700px"></div><br>
<section id="id27">
<h3>6.6.1 å‚æ•°è¯´æ˜<a class="headerlink" href="#id27" title="Link to this heading">ïƒ</a></h3>
<table border="1" class="docutils">
<thead>
<tr>
<th>åç§°</th>
<th>é»˜è®¤å€¼</th>
<th>èŒƒå›´</th>
<th>å«ä¹‰</th>
</tr>
</thead>
<tbody>
<tr>
<td>ä½ç½®X(cm)</td>
<td>-154.1</td>
<td>[-1000, 1000]</td>
<td>å®‰è£…ä½ç½®, åæ ‡åŸç‚¹ä½äºå››è½®ä¸­å¿ƒçš„åœ°é¢å‚ç‚¹</td>
</tr>
<tr>
<td>ä½ç½®Y(cm)</td>
<td>0</td>
<td>[-1000, 1000]</td>
<td>å®‰è£…ä½ç½®, åæ ‡åŸç‚¹ä½äºå››è½®ä¸­å¿ƒçš„åœ°é¢å‚ç‚¹</td>
</tr>
<tr>
<td>ä½ç½®Z(cm)</td>
<td>58</td>
<td>[0, 1000]</td>
<td>å®‰è£…ä½ç½®, åæ ‡åŸç‚¹ä½äºå››è½®ä¸­å¿ƒçš„åœ°é¢å‚ç‚¹</td>
</tr>
<tr>
<td>å››å…ƒæ•°</td>
<td>qx:0 <br> qy:0, <br> qz:-0.70710678118 <br> qw:0.70710678118</td>
<td>[-1, 1]</td>
<td>ä¼ æ„Ÿå™¨å§¿æ€, Eulerè§’æŒ‰ç…§zyxé¡ºåºè®¡ç®—ç”Ÿæˆ</td>
</tr>
</tbody>
</table>
</section>
<section id="id28">
<h3>6.6.2 æ•°æ®è·å–<a class="headerlink" href="#id28" title="Link to this heading">ïƒ</a></h3>
<p>IMU ä»¿çœŸæ•°æ®çš„ topic æ˜¯ IMU_SIM, å¯¹åº”çš„ proto æ˜¯ osi_imu.proto. ä¾èµ– osi_version.proto å’Œ osi_common.proto.</p>
<p>ç”¨æˆ·å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼è·å–æ•°æ®:</p>
<ul class="simple">
<li><p>å®æ—¶ subscribe IMU_SIM topic å¯ä»¥è·å– IMU æ•°æ®</p></li>
<li><p>ä½¿ç”¨æ•°æ®è®°å½•åŠåå¤„ç†åŠŸèƒ½å¯ä»¥ç”Ÿæˆ xlsx æ ¼å¼çš„ IMU æ•°æ®, è¯¦è§â€[ä»¿çœŸæ•°æ®çš„è®°å½•å’Œå›æ”¾](#12. ä»¿çœŸæ•°æ®çš„è®°å½•å’Œå›æ”¾)â€ç« èŠ‚, å…¶ä¸­ post_process éœ€è¦åŠ ä¸Š -i é€‰é¡¹.</p></li>
</ul>
</section>
</section>
<section id="id29">
<h2>6.7 é±¼çœ¼ç›¸æœºä»¿çœŸ<a class="headerlink" href="#id29" title="Link to this heading">ïƒ</a></h2>
<p>TAD Sim æ”¯æŒé±¼çœ¼æ‘„åƒå¤´ä»¿çœŸ, å¹³å°æä¾›é»˜è®¤é…ç½®å‚æ•°, å¹¶æ”¯æŒå„å‚æ•°è‡ªå®šä¹‰é…ç½®åŠŸèƒ½, é±¼çœ¼ç›¸æœºä»¿çœŸä¾èµ– Display æ¨¡å—.</p>
<div align="center"><img src="./_static/images/image238.png" alt="" width="700px"></div><br>
<section id="id30">
<h3>6.7.1 å‚æ•°è¯´æ˜<a class="headerlink" href="#id30" title="Link to this heading">ïƒ</a></h3>
<table border="1" class="docutils">
<thead>
<tr>
<th>åç§°</th>
<th>é»˜è®¤å€¼</th>
<th>èŒƒå›´</th>
<th>å«ä¹‰</th>
</tr>
</thead>
<tbody>
<tr>
<td>ä½ç½®X(cm)</td>
<td>0</td>
<td>[-1000, 1000]</td>
<td>å®‰è£…ä½ç½®, åæ ‡åŸç‚¹ä½äºå››è½®ä¸­å¿ƒçš„åœ°é¢å‚ç‚¹</td>
</tr>
<tr>
<td>ä½ç½®Y(cm)</td>
<td>0</td>
<td>[-1000, 1000]</td>
<td>å®‰è£…ä½ç½®, åæ ‡åŸç‚¹ä½äºå››è½®ä¸­å¿ƒçš„åœ°é¢å‚ç‚¹</td>
</tr>
<tr>
<td>ä½ç½®Z(cm)</td>
<td>171</td>
<td>[0, 1000]</td>
<td>å®‰è£…ä½ç½®, åæ ‡åŸç‚¹ä½äºå››è½®ä¸­å¿ƒçš„åœ°é¢å‚ç‚¹</td>
</tr>
<tr>
<td>æ—‹è½¬X(Â°)</td>
<td>0</td>
<td>[-180, 180]</td>
<td>å®‰è£…è§’åº¦</td>
</tr>
<tr>
<td>æ—‹è½¬Y(Â°)</td>
<td>0</td>
<td>[-180, 180]</td>
<td>å®‰è£…è§’åº¦</td>
</tr>
<tr>
<td>æ—‹è½¬Z(Â°)</td>
<td>0</td>
<td>[-180, 180]</td>
<td>å®‰è£…è§’åº¦</td>
</tr>
<tr>
<td>å®ä¾‹ID</td>
<td>0</td>
<td>-</td>
<td>å½“é…ç½®äº†å¤šä¸ª display æ—¶, åªæœ‰Displayçš„å®ä¾‹IDä¸€è‡´æ—¶, æ‰ä¼šè¢«å¤„ç†</td>
</tr>
<tr>
<td>é¢‘ç‡(Hz)</td>
<td>50</td>
<td>[0, 1000]</td>
<td>æ‹ç…§é¢‘ç‡</td>
</tr>
<tr>
<td>æ°´å¹³åˆ†è¾¨ç‡</td>
<td>1200</td>
<td>æ•´æ•°</td>
<td>å›¾åƒå°ºå¯¸, åƒç´ </td>
</tr>
<tr>
<td>å‚ç›´åˆ†è¾¨ç‡</td>
<td>1080</td>
<td>æ•´æ•°</td>
<td>å›¾åƒå°ºå¯¸, åƒç´ </td>
</tr>
<tr>
<td>ç»†è…»åº¦</td>
<td>0</td>
<td>[-5.0, 5.0]</td>
<td>æ­£æ•°ç»†è…», è´Ÿæ•°ç²—ç³™.ç»†è…»ä¼šå¢åŠ æ¸²æŸ“è´Ÿæ‹…</td>
</tr>
<tr>
<td>é¢œè‰²æ¨¡å¼</td>
<td>0</td>
<td>0å½©è‰², 1é»‘ç™½</td>
<td></td>
</tr>
<tr>
<td>æ¨¡ç³Š</td>
<td>0</td>
<td>[0, 1]</td>
<td>-</td>
</tr>
<tr>
<td>è¿åŠ¨æ¨¡ç³Š</td>
<td>0</td>
<td>[0, 1]</td>
<td>-</td>
</tr>
<tr>
<td>å…‰æ™•å¼ºåº¦</td>
<td>0</td>
<td>[0, 1]</td>
<td>-</td>
</tr>
<tr>
<td>å™ªå£°å¼ºåº¦</td>
<td>ä½</td>
<td>ä½/ä¸­/é«˜/æ— </td>
<td>-</td>
</tr>
<tr>
<td>æš—è§’</td>
<td>0.4</td>
<td>[0.0, 1.0]</td>
<td></td>
</tr>
<tr>
<td>æ³›å…‰bloom</td>
<td>0.675</td>
<td>[0.0, 1.0]</td>
<td></td>
</tr>
<tr>
<td>æ›å…‰æ¨¡å¼</td>
<td>0</td>
<td>è‡ªåŠ¨0/æ‰‹åŠ¨1 (æ‰‹åŠ¨æ—¶:å¿«é—¨é€Ÿåº¦, ISO, å­”å¾„å‚æ•°æœ‰æ•ˆ)</td>
<td></td>
</tr>
<tr>
<td>æ›å…‰è¡¥å¿</td>
<td>1</td>
<td>-15.0ï½15.0</td>
<td>æ›å…‰çš„å¯¹æ•°2^nè°ƒæ•´, è´Ÿå€¼å˜æš—, æ­£å€¼åŠ äº®</td>
</tr>
<tr>
<td>è‰²æ¸©</td>
<td>6500</td>
<td>1500ï½15000K</td>
<td>è‰²æ¸©</td>
</tr>
<tr>
<td>ç™½è‰²è°ƒ</td>
<td>0</td>
<td>-1.0ï½1.0</td>
<td></td>
</tr>
<tr>
<td>é•œå¤´é€é•œç‡</td>
<td>98</td>
<td>1.0ï½100.0%</td>
<td></td>
</tr>
<tr>
<td>ç•¸å˜å‚æ•°</td>
<td>0,0,0,0</td>
<td>åˆ†å¸ƒè¡¨ç¤ºk1,k2,k3,k4</td>
<td></td>
</tr>
<tr>
<td>å†…å‚çŸ©é˜µ</td>
<td>,,,0,,,0,0,1</td>
<td>é•¿åº¦ä¸º9çš„æ•°ç»„, ç»™å‡ºé»˜è®¤å€¼çš„ä½ç½®readonly, å…¶ä½™ä½ç½®å€¼ä¾æ¬¡ä¸ºfx, skew, cx, fy, cy.</td>
<td>å†…å‚å½¢å¼åªèƒ½ä¸ºçŸ©é˜µ</td>
</tr>
</tbody>
</table>
</section>
<section id="id31">
<h3>6.7.2 æ•°æ®è·å–<a class="headerlink" href="#id31" title="Link to this heading">ïƒ</a></h3>
<section id="id32">
<h4>6.7.2.1 å†…å­˜å…±äº«<a class="headerlink" href="#id32" title="Link to this heading">ïƒ</a></h4>
<p>å’Œ Camera æ–¹æ³•ä¸€è‡´, å…±äº«å†…å­˜åœ°å€ä¸º Tadsim_Fisheye_{cameraID}</p>
</section>
<section id="id33">
<h4>6.7.2.2 ç£ç›˜ä¿å­˜<a class="headerlink" href="#id33" title="Link to this heading">ïƒ</a></h4>
<p>Game.ini ä¸­æ·»åŠ å¦‚ä¸‹å†…å®¹:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[Sensor]</span>
<span class="na">FisheyeSaved</span><span class="o">=</span><span class="s">true</span>
</pre></div>
</div>
</section>
<section id="id34">
<h4>6.7.2.3 PB æ¶ˆæ¯<a class="headerlink" href="#id34" title="Link to this heading">ïƒ</a></h4>
<p>åŒå›¾åƒæ–¹æ³• (9.1.2.3 ç« èŠ‚)</p>
</section>
</section>
</section>
<section id="id35">
<h2>6.8 è¯­ä¹‰ç›¸æœºä»¿çœŸ<a class="headerlink" href="#id35" title="Link to this heading">ïƒ</a></h2>
<p>TAD Sim æ”¯æŒè¯­ä¹‰ç›¸æœºä»¿çœŸ, è¯­ä¹‰ç›¸æœºæ˜¯åœ¨æ™®é€šç›¸æœºçš„åŸºç¡€ä¸Šæ·»åŠ äº† alpha é€šé“, ç”¨äºæ ‡è®°åƒç´ çš„ç±»åˆ«.</p>
<p>å¹³å°æä¾›é»˜è®¤é…ç½®å‚æ•°, å¹¶æ”¯æŒå„å‚æ•°è‡ªå®šä¹‰é…ç½®åŠŸèƒ½, è¯­ä¹‰ç›¸æœºä¾èµ– Display æ¨¡å—.</p>
<div align="center"><img src="./_static/images/image239.png" alt="" width="700px"></div><br>
<section id="id36">
<h3>6.8.1 å‚æ•°è¯´æ˜<a class="headerlink" href="#id36" title="Link to this heading">ïƒ</a></h3>
<table border="1" class="docutils">
<thead>
<tr>
<th>åç§°</th>
<th>é»˜è®¤å€¼</th>
<th>èŒƒå›´</th>
<th>å«ä¹‰</th>
</tr>
</thead>
<tbody>
<tr>
<td>ä½ç½®X(cm)</td>
<td>0</td>
<td>[-1000, 1000]</td>
<td>å®‰è£…ä½ç½®, åæ ‡åŸç‚¹ä½äºå››è½®ä¸­å¿ƒçš„åœ°é¢å‚ç‚¹</td>
</tr>
<tr>
<td>ä½ç½®Y(cm)</td>
<td>0</td>
<td>[-1000, 1000]</td>
<td>å®‰è£…ä½ç½®, åæ ‡åŸç‚¹ä½äºå››è½®ä¸­å¿ƒçš„åœ°é¢å‚ç‚¹</td>
</tr>
<tr>
<td>ä½ç½®Z(cm)</td>
<td>171</td>
<td>[0, 1000]</td>
<td>å®‰è£…ä½ç½®, åæ ‡åŸç‚¹ä½äºå››è½®ä¸­å¿ƒçš„åœ°é¢å‚ç‚¹</td>
</tr>
<tr>
<td>æ—‹è½¬X(Â°)</td>
<td>0</td>
<td>[-180, 180]</td>
<td>å®‰è£…è§’åº¦</td>
</tr>
<tr>
<td>æ—‹è½¬Y(Â°)</td>
<td>0</td>
<td>[-180, 180]</td>
<td>å®‰è£…è§’åº¦</td>
</tr>
<tr>
<td>æ—‹è½¬Z(Â°)</td>
<td>0</td>
<td>[-180, 180]</td>
<td>å®‰è£…è§’åº¦</td>
</tr>
<tr>
<td>å®ä¾‹ID</td>
<td>0</td>
<td>-</td>
<td>å½“é…ç½®äº†å¤šä¸ª display æ—¶, åªæœ‰Displayçš„å®ä¾‹IDä¸€è‡´æ—¶, æ‰ä¼šè¢«å¤„ç†</td>
</tr>
<tr>
<td>é¢‘ç‡(Hz)</td>
<td>25</td>
<td>[0, 1000]</td>
<td>æ‹ç…§é¢‘ç‡</td>
</tr>
<tr>
<td>æ°´å¹³åˆ†è¾¨ç‡</td>
<td>1920</td>
<td>æ•´æ•°</td>
<td>å›¾åƒå°ºå¯¸, åƒç´ </td>
</tr>
<tr>
<td>å‚ç›´åˆ†è¾¨ç‡</td>
<td>1208</td>
<td>æ•´æ•°</td>
<td>å›¾åƒå°ºå¯¸, åƒç´ </td>
</tr>
<tr>
<td>ç•¸å˜å‚æ•°</td>
<td>k1=-5.3336804278253547e-001, <br> k2=4.5773462092698042e-001, <br> k3=-4.8360765272003647e-001, <br> p1=-2.3929586859060227e-003, <br> p2=1.8364297357014352e-003</td>
<td></td>
<td>åˆ†å¸ƒè¡¨ç¤ºk1, k2, k3, p1, p2</td>
</tr>
<tr>
<td>å†…å‚å½¢å¼</td>
<td>0</td>
<td>0:çŸ©é˜µ, 1:FOV, 2:æ„Ÿå…‰å™¨</td>
<td>-</td>
</tr>
<tr>
<td>å†…å‚çŸ©é˜µ</td>
<td>1.9451674168728503e+003,0, 9.4611889604089231e+002; <br> 0,1.9381372280069070e+003, 6.1970485474739780e+002; <br> 0,0,1</td>
<td>é•¿åº¦ä¸º9çš„æ•°ç»„,  <br> ç»™å‡ºé»˜è®¤å€¼çš„ä½ç½®readonly, <br>  å…¶ä½™ä½ç½®å€¼ä¾æ¬¡ä¸ºfx, skew, cx, fy, cy.</td>
<td>å½“å†…å‚å½¢å¼ä¸ºçŸ©é˜µæ—¶</td>
</tr>
<tr>
<td>æ°´å¹³FOV(Â°)</td>
<td>60</td>
<td>[0, 180]</td>
<td>å½“å†…å‚å½¢å¼ä¸ºfovæ—¶</td>
</tr>
<tr>
<td>å‚ç›´FOV(Â°)</td>
<td>36.28</td>
<td>[0, 180]</td>
<td>å½“å†…å‚å½¢å¼ä¸ºfovæ—¶</td>
</tr>
<tr>
<td>æ„Ÿå…‰å™¨å®½åº¦(mm)</td>
<td>10</td>
<td>(0, 10000]</td>
<td>å½“å†…å‚å½¢å¼ä¸ºæ„Ÿå…‰å™¨æ—¶</td>
</tr>
<tr>
<td>æ„Ÿå…‰å™¨é«˜åº¦(mm)</td>
<td>10</td>
<td>(0, 10000]</td>
<td>å½“å†…å‚å½¢å¼ä¸ºæ„Ÿå…‰å™¨æ—¶</td>
</tr>
<tr>
<td>é•œå¤´ç„¦è·(mm)</td>
<td>10</td>
<td>(0, 10000]</td>
<td>å½“å†…å‚å½¢å¼ä¸ºæ„Ÿå…‰å™¨æ—¶</td>
</tr>
</tbody>
</table>
</section>
<section id="id37">
<h3>6.8.2 æ•°æ®è·å–<a class="headerlink" href="#id37" title="Link to this heading">ïƒ</a></h3>
<section id="id38">
<h4>6.8.2.1 å†…å­˜å…±äº«<a class="headerlink" href="#id38" title="Link to this heading">ïƒ</a></h4>
<p>å’Œ Camera æ–¹æ³•ä¸€è‡´, å…±äº«å†…å­˜åœ°å€ä¸º <code class="docutils literal notranslate"><span class="pre">Tadsim_Semantic_{cameraID}</span></code>.</p>
</section>
<section id="id39">
<h4>6.8.2.2 ç£ç›˜ä¿å­˜<a class="headerlink" href="#id39" title="Link to this heading">ïƒ</a></h4>
<p>Game.iniä¸­æ·»åŠ å¦‚ä¸‹å†…å®¹:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[Sensor]</span>
<span class="na">SemanticSaved</span><span class="o">=</span><span class="s">true</span>
</pre></div>
</div>
</section>
<section id="id40">
<h4>6.8.2.3 PB æ¶ˆæ¯<a class="headerlink" href="#id40" title="Link to this heading">ïƒ</a></h4>
<p>åŒå›¾åƒæ–¹æ³• (9.1.2.3 ç« èŠ‚)</p>
</section>
</section>
</section>
<section id="id41">
<h2>6.9 æ·±åº¦ç›¸æœºä»¿çœŸ<a class="headerlink" href="#id41" title="Link to this heading">ïƒ</a></h2>
<p>TAD Sim æ”¯æŒæ·±åº¦ç›¸æœºä»¿çœŸ, å¹³å°æä¾›é»˜è®¤é…ç½®å‚æ•°, å¹¶æ”¯æŒå„å‚æ•°è‡ªå®šä¹‰é…ç½®åŠŸèƒ½, æ·±åº¦ç›¸æœºä¾èµ– Display æ¨¡å—.</p>
<div align="center"><img src="./_static/images/image240.png" alt="" width="700px"></div><br>
<section id="id42">
<h3>6.9.1 å‚æ•°è¯´æ˜<a class="headerlink" href="#id42" title="Link to this heading">ïƒ</a></h3>
<table border="1" class="docutils">
<thead>
<tr>
<th>åç§°</th>
<th>é»˜è®¤å€¼</th>
<th>èŒƒå›´</th>
<th>å«ä¹‰</th>
</tr>
</thead>
<tbody>
<tr>
<td>ä½ç½®X(cm)</td>
<td>0</td>
<td>[-1000, 1000]</td>
<td>å®‰è£…ä½ç½®, åæ ‡åŸç‚¹ä½äºå››è½®ä¸­å¿ƒçš„åœ°é¢å‚ç‚¹</td>
</tr>
<tr>
<td>ä½ç½®Y(cm)</td>
<td>0</td>
<td>[-1000, 1000]</td>
<td>å®‰è£…ä½ç½®, åæ ‡åŸç‚¹ä½äºå››è½®ä¸­å¿ƒçš„åœ°é¢å‚ç‚¹</td>
</tr>
<tr>
<td>ä½ç½®Z(cm)</td>
<td>171</td>
<td>[0, 1000]</td>
<td>å®‰è£…ä½ç½®, åæ ‡åŸç‚¹ä½äºå››è½®ä¸­å¿ƒçš„åœ°é¢å‚ç‚¹</td>
</tr>
<tr>
<td>æ—‹è½¬X(Â°)</td>
<td>0</td>
<td>[-180, 180]</td>
<td>å®‰è£…è§’åº¦</td>
</tr>
<tr>
<td>æ—‹è½¬Y(Â°)</td>
<td>0</td>
<td>[-180, 180]</td>
<td>å®‰è£…è§’åº¦</td>
</tr>
<tr>
<td>æ—‹è½¬Z(Â°)</td>
<td>0</td>
<td>[-180, 180]</td>
<td>å®‰è£…è§’åº¦</td>
</tr>
<tr>
<td>å®ä¾‹ID</td>
<td>0</td>
<td>-</td>
<td>å½“é…ç½®äº†å¤šä¸ª display æ—¶, åªæœ‰Displayçš„å®ä¾‹IDä¸€è‡´æ—¶, æ‰ä¼šè¢«å¤„ç†</td>
</tr>
<tr>
<td>é¢‘ç‡(Hz)</td>
<td>25</td>
<td>[0, 1000]</td>
<td>æ‹ç…§é¢‘ç‡</td>
</tr>
<tr>
<td>æ°´å¹³åˆ†è¾¨ç‡</td>
<td>1920</td>
<td>æ•´æ•°</td>
<td>å›¾åƒå°ºå¯¸, åƒç´ </td>
</tr>
<tr>
<td>å‚ç›´åˆ†è¾¨ç‡</td>
<td>1208</td>
<td>æ•´æ•°</td>
<td>å›¾åƒå°ºå¯¸, åƒç´ </td>
</tr>
<tr>
<td>ç•¸å˜å‚æ•°</td>
<td>k1=-5.3336804278253547e-001, <br> k2=4.5773462092698042e-001, <br> k3=-4.8360765272003647e-001, <br> p1=-2.3929586859060227e-003, <br> p2=1.8364297357014352e-003</td>
<td></td>
<td>åˆ†å¸ƒè¡¨ç¤ºk1,k2,k3,p1,p2</td>
</tr>
<tr>
<td>å†…å‚å½¢å¼</td>
<td>0</td>
<td>0:çŸ©é˜µ, 1:FOV, 2:æ„Ÿå…‰å™¨</td>
<td>-</td>
</tr>
<tr>
<td>å†…å‚çŸ©é˜µ</td>
<td>1.9451674168728503e+003, 0, 9.4611889604089231e+002; <br> 0,1.9381372280069070e+003, 6.1970485474739780e+002; <br> 0,0,1</td>
<td>é•¿åº¦ä¸º9çš„æ•°ç»„,ç»™å‡ºé»˜è®¤å€¼çš„ä½ç½® readonly,å…¶ä½™ä½ç½®å€¼ä¾æ¬¡ä¸ºfx, skew, cx, fy, cy.</td>
<td>å½“å†…å‚å½¢å¼ä¸ºçŸ©é˜µæ—¶</td>
</tr>
<tr>
<td>æ°´å¹³FOV(Â°)</td>
<td>60</td>
<td>[0, 180]</td>
<td>å½“å†…å‚å½¢å¼ä¸º fovæ—¶</td>
</tr>
<tr>
<td>å‚ç›´FOV(Â°)</td>
<td>36.28</td>
<td>[0, 180]</td>
<td>å½“å†…å‚å½¢å¼ä¸ºfovæ—¶</td>
</tr>
<tr>
<td>æ„Ÿå…‰å™¨å®½åº¦(mm)</td>
<td>10</td>
<td>(0, 10000]</td>
<td>å½“å†…å‚å½¢å¼ä¸ºæ„Ÿå…‰å™¨æ—¶</td>
</tr>
<tr>
<td>æ„Ÿå…‰å™¨é«˜åº¦(mm)</td>
<td>10</td>
<td>(0, 10000]</td>
<td>å½“å†…å‚å½¢å¼ä¸ºæ„Ÿå…‰å™¨æ—¶</td>
</tr>
<tr>
<td>é•œå¤´ç„¦è·(mm)</td>
<td>10</td>
<td>(0, 10000]</td>
<td>å½“å†…å‚å½¢å¼ä¸ºæ„Ÿå…‰å™¨æ—¶</td>
</tr>
</tbody>
</table>
</section>
<section id="id43">
<h3>6.9.2 æ•°æ®è·å–<a class="headerlink" href="#id43" title="Link to this heading">ïƒ</a></h3>
<section id="id44">
<h4>6.9.2.1 å†…å­˜å…±äº«<a class="headerlink" href="#id44" title="Link to this heading">ïƒ</a></h4>
<p>å’Œ Camera æ–¹æ³•ä¸€è‡´, å…±äº«å†…å­˜åœ°å€ä¸º Tadsim_Depth_{cameraID}</p>
</section>
<section id="id45">
<h4>6.9.2.1 ç£ç›˜ä¿å­˜<a class="headerlink" href="#id45" title="Link to this heading">ïƒ</a></h4>
<p>Game.iniä¸­æ·»åŠ å¦‚ä¸‹å†…å®¹:</p>
<div class="highlight-ini notranslate"><div class="highlight"><pre><span></span><span class="k">[Sensor]</span>
<span class="na">DepthSaved</span><span class="o">=</span><span class="s">true</span>
</pre></div>
</div>
</section>
<section id="id46">
<h4>6.9.2.3 PB æ¶ˆæ¯<a class="headerlink" href="#id46" title="Link to this heading">ïƒ</a></h4>
<p>åŒå›¾åƒæ–¹æ³• (9.1.2.3 ç« èŠ‚)</p>
</section>
</section>
</section>
<section id="gps">
<h2>6.10 GPS ä»¿çœŸ<a class="headerlink" href="#gps" title="Link to this heading">ïƒ</a></h2>
<p>TAD Sim æ”¯æŒ GPS ä»¿çœŸ, å¹³å°æä¾›é»˜è®¤é…ç½®å‚æ•°, å¹¶æ”¯æŒå„å‚æ•°è‡ªå®šä¹‰é…ç½®åŠŸèƒ½.</p>
<div align="center"><img src="./_static/images/image241.png" alt="" width="700px"></div><br>
<p>ä¸‹æ–‡åˆ—å‡ºäº† GPS ä»¿çœŸé…ç½®åŠæ•°æ®è·å–è¯¦ç»†ä¿¡æ¯.</p>
<section id="id47">
<h3>6.10.1. å‚æ•°è¯´æ˜<a class="headerlink" href="#id47" title="Link to this heading">ïƒ</a></h3>
<table border="1" class="docutils">
<thead>
<tr>
<th>åç§°</th>
<th>é»˜è®¤å€¼</th>
<th>èŒƒå›´</th>
<th>å«ä¹‰</th>
</tr>
</thead>
<tbody>
<tr>
<td>ä½ç½®X(cm)</td>
<td>0</td>
<td>[-1000, 1000]</td>
<td>å®‰è£…ä½ç½®, åæ ‡åŸç‚¹ä½äºå››è½®ä¸­å¿ƒçš„åœ°é¢å‚ç‚¹</td>
</tr>
<tr>
<td>ä½ç½®Y(cm)</td>
<td>15.8</td>
<td>[-1000, 1000]</td>
<td>å®‰è£…ä½ç½®, åæ ‡åŸç‚¹ä½äºå››è½®ä¸­å¿ƒçš„åœ°é¢å‚ç‚¹</td>
</tr>
<tr>
<td>ä½ç½®Z(cm)</td>
<td>112.6</td>
<td>[0, 1000]</td>
<td>å®‰è£…ä½ç½®, åæ ‡åŸç‚¹ä½äºå››è½®ä¸­å¿ƒçš„åœ°é¢å‚ç‚¹</td>
</tr>
</tbody>
</table>
</section>
<section id="id48">
<h3>6.10.2. æ•°æ®è·å–<a class="headerlink" href="#id48" title="Link to this heading">ïƒ</a></h3>
<p>GPS ä»¿çœŸæ•°æ®çš„ topic æ˜¯ GPS_SIM, proto æ–‡ä»¶ä¸º osi_gps.proto. ä¾èµ– osi_version.proto å’Œ osi_common.proto.</p>
<p>ç”¨æˆ·å¯ä»¥é€šè¿‡ä»¥ä¸‹æ–¹å¼è·å–æ•°æ®:</p>
<ul class="simple">
<li><p>å®æ—¶ subscribe GPS_SIM topic å¯ä»¥è·å– GPS æ•°æ®</p></li>
<li><p>ä½¿ç”¨æ•°æ®è®°å½•åŠåå¤„ç†åŠŸèƒ½å¯ä»¥ç”Ÿæˆ xlsx æ ¼å¼çš„ GPS æ•°æ®, è¯¦è§ â€œ[ä»¿çœŸæ•°æ®çš„è®°å½•å’Œå›æ”¾](#12. ä»¿çœŸæ•°æ®çš„è®°å½•å’Œå›æ”¾)â€ ç« èŠ‚, å…¶ä¸­ post_process éœ€è¦åŠ ä¸Š <code class="docutils literal notranslate"><span class="pre">-i</span></code> é€‰é¡¹.</p></li>
</ul>
</section>
</section>
<section id="v2x">
<h2>6.11 V2X ä»¿çœŸ<a class="headerlink" href="#v2x" title="Link to this heading">ïƒ</a></h2>
<p>TAD Sim é€šè¿‡åœ°å›¾ç¼–è¾‘å™¨é…ç½® RSU, åœºæ™¯ç¼–è¾‘å™¨é…ç½® OBU è¿›è¡Œ V2X ä»¿çœŸ, å¹³å°æä¾›é»˜è®¤é…ç½®å‚æ•°, å¹¶æ”¯æŒå„å‚æ•°è‡ªå®šä¹‰é…ç½®åŠŸèƒ½.</p>
<p>è¯¦ç»†ä¿¡æ¯è¯·æŸ¥çœ‹ <a class="reference internal" href="307.V2X%E4%BB%BF%E7%9C%9F.html"><span class="std std-doc">10. V2X ä»¿çœŸ</span></a></p>
</section>
<section id="id49">
<h2>6.12 ä»¿çœŸåˆæˆæ•°æ®ç”Ÿæˆ<a class="headerlink" href="#id49" title="Link to this heading">ïƒ</a></h2>
<p>åœ¨ä»¿çœŸè¿‡ç¨‹ä¸­ TAD Sim å¯ä¸ºæ¨¡æ‹Ÿå¯¹è±¡(å¦‚è½¦è¾†ã€è¡Œäººã€ä¼ æ„Ÿå™¨æ•°æ®ç­‰) æ·»åŠ æè¿°æ€§ä¿¡æ¯, å®ç°è¯¥åŠŸèƒ½çš„æ¨¡å—ä¸º simlabel, å…¶ä¸»è¦å®Œæˆä»¿çœŸæ•°æ®çš„æ ‡æ³¨è½¬æ¢ (å³å°†ä»¿çœŸæ•°æ®è½¬æ¢ä¸ºæ ‡æ³¨æ•°æ®).</p>
<p>ä»¿çœŸç³»ç»Ÿå¯ä»¥ç”¨äºç”Ÿæˆè‡ªåŠ¨é©¾é©¶æ ‡æ³¨æ•°æ®, è¿™äº›æ•°æ®å¯¹äºè®­ç»ƒå’ŒéªŒè¯è‡ªåŠ¨é©¾é©¶ç®—æ³•è‡³å…³é‡è¦. é€šè¿‡åœ¨ä»¿çœŸç¯å¢ƒä¸­åˆ›å»ºå„ç§äº¤é€šåœºæ™¯, å¯ä»¥æ”¶é›†å¤§é‡æœ‰å…³è½¦è¾†ã€è¡Œäººã€è‡ªè¡Œè½¦ç­‰äº¤é€šå‚ä¸è€…çš„ä¿¡æ¯, ä»è€Œä¸ºè‡ªåŠ¨é©¾é©¶ç³»ç»Ÿæä¾›ä¸°å¯Œçš„è®­ç»ƒæ•°æ®.</p>
<p>è¯¦ç»†ä¿¡æ¯è¯·æŸ¥çœ‹ <a class="reference internal" href="308.%E4%BB%BF%E7%9C%9F%E5%90%88%E6%88%90%E6%95%B0%E6%8D%AE%E7%94%9F%E6%88%90.html"><span class="std std-doc">11. ä»¿çœŸåˆæˆæ•°æ®ç”Ÿæˆ</span></a></p>
</section>
<section id="id50">
<h2>6.13 ä¼ æ„Ÿå™¨ä¾èµ–æ¨¡å—<a class="headerlink" href="#id50" title="Link to this heading">ïƒ</a></h2>
<section id="display">
<h3>6.13.1 Display æ¨¡å—<a class="headerlink" href="#display" title="Link to this heading">ïƒ</a></h3>
<p><strong>å¯æ‰§è¡Œå‚æ•°è¯´æ˜</strong></p>
<table border="1" class="docutils">
<thead>
<tr>
<th>å‚æ•°</th>
<th>å–å€¼</th>
<th>å«ä¹‰</th>
<th>ä¸¾ä¾‹</th>
</tr>
</thead>
<tbody>
<tr>
<td>-name</td>
<td>æ¨¡å—åå­—, é»˜è®¤ Display</td>
<td>æ¨¡å—åå­—</td>
<td>-name=Display</td>
</tr>
<tr>
<td>-mode</td>
<td>FrameAsyncã€FrameSync</td>
<td>åŒæ­¥å’Œå¼‚æ­¥æ¨¡å¼,åŒæ­¥æ¨¡å¼: å¸§ç‡å’Œ step ä¿æŒåŒæ­¥, ä½†åœ¨ Step æš‚åœæ—¶, ä»¥æä½å¸§ç‡è¿è¡Œ, å¼‚æ­¥æ¨¡å¼: å¸§ç‡å’Œ step æ— å…³, ç”»é¢ä»¥æœ€å¤§å¸§ç‡æ¸²æŸ“.</td>
<td>-mode=FrameAsync</td>
</tr>
<tr>
<td>UserDir</td>
<td>æœ¬åœ°ç›®å½•</td>
<td>æ—¥å¿—ç›®å½•</td>
<td>UserDir=xx/xx/x/</td>
</tr>
<tr>
<td>-address</td>
<td>TadsimServer</td>
<td>tadsim åœ°å€, ç¼ºçœå€¼ä¸º 127.0.0.1:21302</td>
<td>-address=192.168.0.1:21302</td>
</tr>
<tr>
<td>-device</td>
<td>æ•°å­—æˆ–all(é»˜è®¤)</td>
<td>æŒ‡å®šå®ä¾‹ id, åªæœ‰ç»‘å®šåˆ°è¯¥idçš„ä¼ æ„Ÿå™¨æ‰è¢«è¯»å–, å¯ä»¥æŒ‡å®šall, è¡¨ç¤ºæ‰€æœ‰ä¼ æ„Ÿå™¨</td>
<td>-device=all</td>
</tr>
<tr>
<td>-topicId</td>
<td>æ•°å­—</td>
<td>æŒ‡å®š Topicid, è®¾ç½®ä¼ æ„Ÿå™¨å¹¿æ’­çš„topicä¸ºDISPLAYSENSOR_{id}, å¦‚æœæ²¡æœ‰è®¾ç½®, ç­‰åŒäº -device</td>
<td>-topicId=3</td>
</tr>
<tr>
<td>-hil</td>
<td>å±å¹•åƒç´ åæ ‡</td>
<td>è®¾ç½® HIL æ–¹å¼, æŒ‡å®š(æ‰€æœ‰å±å¹•ç»„åˆçš„å…¨å±€)åæ ‡ç‚¹, å³å¯åœ¨å½“å‰ä½ç½®çš„å±å¹•å†…å…¨å±</td>
<td>-hil=100x500</td>
</tr>
<tr>
<td>-graphicsadapter</td>
<td>è‡ªç„¶æ•°</td>
<td>æŒ‡å®šç‰¹å®š GPU, ä» 0 å¼€å§‹, å³ 0 è¡¨ç¤º GPU0, Linux å¹³å°çš„è¯¥å‚æ•°éœ€è¦æ‰“å¼€æ¯å±</td>
<td>-graphicsadapter=1</td>
</tr>
<tr>
<td>-RenderOffscreen</td>
<td></td>
<td>æ¯å±æ¸²æŸ“</td>
<td>-RenderOffscreen</td>
</tr>
<tr>
<td>-LocalLogTimes</td>
<td></td>
<td>æ—¥å¿—æ—¶é—´ä½¿ç”¨å½“å‰æ—¶åŒº</td>
<td>-LocalLogTimes</td>
</tr>
<tr>
<td>-log LOG</td>
<td>æ–‡ä»¶å</td>
<td>æŒ‡å®šæ—¥å¿—åç§°</td>
<td>-log LOG=Display.log</td>
</tr>
</tbody>
</table>
</section>
<section id="sensortruth">
<h3>6.13.2 SensorTruth æ¨¡å—<a class="headerlink" href="#sensortruth" title="Link to this heading">ïƒ</a></h3>
<p><strong>åˆå§‹åŒ–å‚æ•°è¯´æ˜</strong></p>
<table border="1" class="docutils">
<thead>
<tr>
<th>å‚æ•°</th>
<th>å–å€¼</th>
<th>å«ä¹‰</th>
<th>ä¸¾ä¾‹</th>
</tr>
</thead>
<tbody>
<tr>
<td>CameraTruth</td>
<td>ON, OFF</td>
<td>å¼€å¯å›¾åƒçœŸå€¼å­æ¨¡å—</td>
<td>CameraTruth=ON</td>
</tr>
<tr>
<td>LidarTruth</td>
<td>ON, OFF</td>
<td>å¼€å¯lidarçœŸå€¼å­æ¨¡å—</td>
<td>LidarTruth=ON</td>
</tr>
<tr>
<td>UltrasonicTruth</td>
<td>ON, OFF</td>
<td>å¼€å¯è¶…å£°æ³¢çœŸå€¼å­æ¨¡å—</td>
<td>UltrasonicTruth=ON</td>
</tr>
<tr>
<td>SensorTruth</td>
<td>ON, OFF</td>
<td>å¼€å¯ç›®æ ‡çœŸå€¼å­æ¨¡å—</td>
<td>SensorTruth=ON</td>
</tr>
<tr>
<td>DebugDir</td>
<td>è·¯å¾„</td>
<td>æŒ‡å®šè°ƒè¯•è¾“å‡ºç›®å½•</td>
<td>DebugDir=XXX/XXX</td>
</tr>
<tr>
<td>-device</td>
<td>æ•°å­—æˆ–all(é»˜è®¤)</td>
<td>æŒ‡å®šå®ä¾‹ id, åªæœ‰ç»‘å®šåˆ°è¯¥idçš„ä¼ æ„Ÿå™¨æ‰è¢«è¯»å–, å¯ä»¥æŒ‡å®šall, è¡¨ç¤ºæ‰€æœ‰ä¼ æ„Ÿå™¨</td>
<td>-device=all</td>
</tr>
<tr>
<td>CT_MaxDistance</td>
<td>ç±³</td>
<td>ç›¸æœºç›®æ ‡æœ€å¤§è·ç¦»</td>
<td>CT_MaxDistance=100.0</td>
</tr>
<tr>
<td>CT_Completeness</td>
<td>0~1</td>
<td>ç›¸æœºç›®æ ‡å®Œæ•´åº¦, è¢«é®æŒ¡çš„é¢ç§¯æ¯”ä¾‹ä¸èƒ½å°äºè¯¥å€¼</td>
<td>CT_Completeness=0.5</td>
</tr>
<tr>
<td>CT_MinArea</td>
<td>åƒç´ </td>
<td>ç›¸æœºç›®æ ‡çš„åƒç´ é¢ç§¯</td>
<td>CT_MinArea=20</td>
</tr>
<tr>
<td>LT_Completeness</td>
<td>0~1</td>
<td>Lidar ç›®æ ‡å®Œæ•´åº¦, è¢«é®æŒ¡çš„æ¿€å…‰æ•°æ¯”ä¾‹ä¸èƒ½å°äºè¯¥å€¼</td>
<td>LT_Completeness=0.5</td>
</tr>
<tr>
<td>LT_MinHitNum</td>
<td>å¤§äº0çš„æ•´æ•°</td>
<td>æœ€å°æ¿€å…‰ä¸ªæ•°, å°äºå®ƒçš„ç›®æ ‡è¢«ä¸¢å¼ƒ</td>
<td>LT_MinHitNum=5</td>
</tr>
</tbody>
</table>
</section>
<section id="radar">
<h3>6.13.3 Radar æ¨¡å—<a class="headerlink" href="#radar" title="Link to this heading">ïƒ</a></h3>
<p>TAD Sim æ”¯æŒ Radar ä»¿çœŸ, å¹³å°æä¾›é»˜è®¤é…ç½®å‚æ•°, å¹¶æ”¯æŒå„å‚æ•°è‡ªå®šä¹‰é…ç½®åŠŸèƒ½.</p>
<p><strong>åˆå§‹åŒ–å‚æ•°è¯´æ˜</strong></p>
<table border="1" class="docutils">
<thead>
<tr>
<th>å‚æ•°</th>
<th>å–å€¼</th>
<th>å«ä¹‰</th>
<th>ä¸¾ä¾‹</th>
</tr>
</thead>
<tbody>
<tr>
<td>DebugDir</td>
<td>è·¯å¾„</td>
<td>è°ƒè¯•è¾“å‡ºç›®å½•</td>
<td>DebugDir=/XX/XX/</td>
</tr>
<tr>
<td>IgnoreZ</td>
<td>ON, OFF</td>
<td>å¿½ç•¥é«˜ç¨‹</td>
<td>IgnoreZ=ON</td>
</tr>
<tr>
<td>-device</td>
<td>æ•°å­—<br>æˆ–<br>all(é»˜è®¤)</td>
<td>æŒ‡å®šå®ä¾‹ id, åªæœ‰ç»‘å®šåˆ°è¯¥ id çš„ä¼ æ„Ÿå™¨æ‰è¢«è¯»å–, å¯ä»¥æŒ‡å®š all, è¡¨ç¤ºæ‰€æœ‰ä¼ æ„Ÿå™¨</td>
<td>-device=all</td>
</tr>
</tbody>
</table>
</section>
<section id="imu-gps">
<h3>6.13.4 imu_gps æ¨¡å—<a class="headerlink" href="#imu-gps" title="Link to this heading">ïƒ</a></h3>
<p>TAD Sim æ”¯æŒ GPS IMU ä»¿çœŸ, å¹³å°æä¾›é»˜è®¤é…ç½®å‚æ•°, å¹¶æ”¯æŒå„å‚æ•°è‡ªå®šä¹‰é…ç½®åŠŸèƒ½.</p>
<p><strong>åˆå§‹åŒ–å‚æ•°è¯´æ˜</strong></p>
<table border="1" class="docutils">
<thead>
<tr>
<th>å‚æ•°</th>
<th>å–å€¼</th>
<th>å«ä¹‰</th>
<th>ä¸¾ä¾‹</th>
</tr>
</thead>
<tbody>
<tr>
<td>mode</td>
<td>imu æˆ– gps</td>
<td>åˆ†åˆ«è¡¨ç¤º imu only, gps only</td>
<td>mode=imu</td>
</tr>
</tbody>
</table>
</section>
<section id="synthetic-data">
<h3>6.13.5 synthetic_data æ¨¡å—<a class="headerlink" href="#synthetic-data" title="Link to this heading">ïƒ</a></h3>
<p>TAD Sim æ”¯æŒä»¿çœŸæ ‡æ³¨æ•°æ®ç”Ÿæˆ, å¹³å°æä¾›é»˜è®¤é…ç½®å‚æ•°, å¹¶æ”¯æŒå„å‚æ•°è‡ªå®šä¹‰é…ç½®åŠŸèƒ½.</p>
<p><strong>åˆå§‹åŒ–å‚æ•°è¯´æ˜</strong></p>
<table border="1" class="docutils">
<thead>
<tr>
<th>å‚æ•°</th>
<th>å–å€¼</th>
<th>å«ä¹‰</th>
<th>ä¸¾ä¾‹</th>
</tr>
</thead>
<tbody>
<tr>
<td>-device</td>
<td>æ•°å­—<br>æˆ–<br>all(é»˜è®¤)</td>
<td>æŒ‡å®šå®ä¾‹id, åªæœ‰ç»‘å®šåˆ°è¯¥idçš„ä¼ æ„Ÿå™¨æ‰è¢«è¯»å–, å¯ä»¥æŒ‡å®šall, è¡¨ç¤ºæ‰€æœ‰ä¼ æ„Ÿå™¨</td>
<td>-device=all</td>
</tr>
<tr>
<td>CreateScenarioDir</td>
<td>true, false</td>
<td>æ˜¯å¦åˆ›å»ºåœºæ™¯ç›®å½•, é»˜è®¤ true, åœ¨å¤šä¸ªåœºæ™¯è¿ç»­æ’­æ”¾æ—¶, é˜²æ­¢æ•°æ®è¢«è¦†ç›–</td>
<td>CreateScenarioDir=false</td>
</tr>
<tr>
<td>NumOfDisplay</td>
<td>æ•´æ•°</td>
<td>Display çš„ä¸ªæ•°, ç”¨äºåˆ†å¸ƒå¼å¤šä¸ªæ¸²æŸ“å¼•æ“æ‰€æœ‰ä¼ æ„Ÿå™¨çš„æ¥æ”¶.</td>
<td>NumOfDisplay=30</td>
</tr>
<tr>
<td>DataSavePath</td>
<td>è·¯å¾„</td>
<td>ä¿å­˜ç›®å½•è·¯å¾„</td>
<td>DataSavePath=<br>/home/sim/data/display_pic_dir</td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">å¤‡æ³¨</p>
<p>æ³¨: NumOfDisplay ä¸€å®šè¦è¦†ç›– Display çš„ topic, simlabel ä¼šè®¢é˜… DISPLAYSENSOR_{id}, ä¿è¯æ¥æ”¶å®Œæ•´.</p>
</div>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="é¡µè„š">
        <a href="305.%E5%8A%A8%E5%8A%9B%E5%AD%A6%E4%BB%BF%E7%9C%9F.html" class="btn btn-neutral float-left" title="5. åŠ¨åŠ›å­¦ä»¿çœŸ" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> ä¸Šä¸€é¡µ</a>
        <a href="307.V2X%E4%BB%BF%E7%9C%9F.html" class="btn btn-neutral float-right" title="7. V2Xä»¿çœŸ" accesskey="n" rel="next">ä¸‹ä¸€é¡µ <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; ç‰ˆæƒæ‰€æœ‰ Copyright (C) 2024 Tencent Inc.  All rights reservedã€‚</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>